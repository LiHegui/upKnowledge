import{_ as l,e as o,g as n,h as e,f as p,i as c,r as i,o as u,j as s}from"./app-BeRZjn83.js";const k={};function r(b,a){const t=i("CodeDemo");return u(),o("div",null,[a[2]||(a[2]=n("h2",{id:"订阅发布-源码",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#订阅发布-源码"},[n("span",null,"订阅发布(源码)")])],-1)),a[3]||(a[3]=n("div",{class:"hint-container tip"},[n("p",{class:"hint-container-title"},"提示"),n("p",null,"发布-订阅是一种消息范式 消息的发送者（称为发布者）不会将消息直接发送给特定的接收者（称为订阅者）。 而是将发布的消息分为不同的类别，无需了解哪些订阅者（如果有的话）可能存在 同样的，订阅者可以表达对一个或多个类别的兴趣，只接收感兴趣的消息，无需了解哪些发布者存在")],-1)),e(t,{id:"code-demo-8",type:"normal",code:"eJy9Vc1q20AQfpWtL1LAOPeWFCqRWw+B9lISUyRlbG+RtUYrOTaOIVBy6aX0VnppKfTaawt9HrfJW3T2T9pVVolPMQbJ883P983MrjeDd3zwdHB4SG5+fr/9fL37+Gn3+/1ZkeUJ5+SkTl/VKdmcFQQ/GSt4VdZZxcpwUbIFPzCI+FQzykdz4DyZAidHZLPtYDnlFRRQ2iA+1AsS+Pvrz+7DN0Xg5upa2Rd1inGzsFovYCgYYIrKqStZEVhh9ljBmN8hcyqCx20EnZDwiR3g5LujRYVj0tPxs9atq871Hi1qJG3o9mlVLW+08jrlWUlTMGrTPqEvdSuN0qa1/VJNiF9rJ4EU26+1463Fph6dt1df/n39oX4WrKKTtdTm0WVtzr3DU95Nq+Q2eSVcXjoarIjRhJXHSTYLkfOQ0OIcVgfk6Hm3MVkaNiSk01gLlCJbsVJvc17EtuJgPEemSOZmhVfuykn+AkYt4mGtmYR0DKL6TTs0nX74lNh5cF4+9zYpfpUePPy6aY8s6IGj4Kjx+DpSUIzcmddvTo7fvsCawbzmNAvQyQIiCbAlBQE4UCyggi0htyFsIlYWAuFCX5ShKGzhahdESe2jDGHQYsFQJxKhrbkZkSI9JMEFkKQEsmZ1MQ3uc47QuZoB4TSnyIQskzyHtQzpEBOS+4hFfmLRXWK4DqyYQumrIDrXVyH2V4jdCjFWSEhaUpgQHDqu3ZqwCanoHGRBU7I93qbd7e6GgYU6VS27tUZGWiluo+ZaEHVYDqOcTZ2E6JYBXcI5ZsYIvBe2bSdaP9NsPy233Za9Swv7sRetaE9aZkJ+Wu6MLHuXFi7dXrTiHlpyAdBtpP8k1Aj0YnTtUY89VpkG2/+a3wP/"},{default:c(()=>a[0]||(a[0]=[n("div",{class:"language-javascript line-numbers-mode","data-highlighter":"prismjs","data-ext":"js","data-title":"js"},[n("pre",null,[n("code",null,[n("span",{class:"line"},[n("span",{class:"token comment"},"// 订阅发布")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"PubSub"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token function"},"constructor"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"props"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("        "),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("messages "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"},[s("        "),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("listeners "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token comment"},"// 添加发布者")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token function"},"publish"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("type"),n("span",{class:"token punctuation"},","),s(" content")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("        "),n("span",{class:"token keyword"},"const"),s(" existContent "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("messages"),n("span",{class:"token punctuation"},"["),s("type"),n("span",{class:"token punctuation"},"]")]),s(`
`),n("span",{class:"line"},[s("        "),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"!"),s("existContent"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("            "),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("messages"),n("span",{class:"token punctuation"},"["),s("type"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("        "),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"},[s("        "),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("messages"),n("span",{class:"token punctuation"},"["),s("type"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),s("content"),n("span",{class:"token punctuation"},")")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token comment"},"// 添加订阅者")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token function"},"subscribe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("type"),n("span",{class:"token punctuation"},","),s(" cb")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("        "),n("span",{class:"token keyword"},"const"),s(" existListener "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("listeners"),n("span",{class:"token punctuation"},"["),s("type"),n("span",{class:"token punctuation"},"]")]),s(`
`),n("span",{class:"line"},[s("        "),n("span",{class:"token keyword"},"if"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"!"),s("existListener"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("            "),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("listeners"),n("span",{class:"token punctuation"},"["),s("type"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]")]),s(`
`),n("span",{class:"line"},[s("        "),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"},[s("        "),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("listeners"),n("span",{class:"token punctuation"},"["),s("type"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),s("cb"),n("span",{class:"token punctuation"},")")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token comment"},"// 通知")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token function"},"notify"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},"type"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("        "),n("span",{class:"token keyword"},"const"),s(" messages "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("messages"),n("span",{class:"token punctuation"},"["),s("type"),n("span",{class:"token punctuation"},"]")]),s(`
`),n("span",{class:"line"},[s("        "),n("span",{class:"token keyword"},"const"),s(" subscribers "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("listeners"),n("span",{class:"token punctuation"},"["),s("type"),n("span",{class:"token punctuation"},"]"),s(),n("span",{class:"token operator"},"||"),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]")]),s(`
`),n("span",{class:"line"},[s("        subscribers"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"forEach"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("cb"),n("span",{class:"token punctuation"},","),s(" index")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("            "),n("span",{class:"token function"},"cb"),n("span",{class:"token punctuation"},"("),s("messages"),n("span",{class:"token punctuation"},"["),s("index"),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},")")]),s(`
`),n("span",{class:"line"},[s("        "),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"Publisher"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token function"},"constructor"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("name"),n("span",{class:"token punctuation"},","),s(" context")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("        "),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("name "),n("span",{class:"token operator"},"="),s(" name"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("        "),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("context "),n("span",{class:"token operator"},"="),s(" context"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token function"},"publish"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("type"),n("span",{class:"token punctuation"},","),s(" content")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("        "),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("context"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"publish"),n("span",{class:"token punctuation"},"("),s("type"),n("span",{class:"token punctuation"},","),s(" content"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"Subscriber"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token function"},"constructor"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("name"),n("span",{class:"token punctuation"},","),s(" context")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("        "),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("name "),n("span",{class:"token operator"},"="),s(" name"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("        "),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("context "),n("span",{class:"token operator"},"="),s(" context"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token function"},"subscribe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token parameter"},[s("type"),n("span",{class:"token punctuation"},","),s(" cb")]),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("        "),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("context"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"subscribe"),n("span",{class:"token punctuation"},"("),s("type"),n("span",{class:"token punctuation"},","),s(" cb"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"TYPE_A"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"'music'"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"TYPE_B"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"'movie'"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"const"),s(),n("span",{class:"token constant"},"TYPE_C"),s(),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"'novel'"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"const"),s(" pubsub "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"PubSub"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"const"),s(" publisherA "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Publisher"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'publisherA'"),n("span",{class:"token punctuation"},","),s(" pubsub"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("publisherA"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"publish"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"TYPE_A"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'we are young'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("publisherA"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"publish"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"TYPE_B"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'the silicon valley'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"const"),s(" publisherB "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Publisher"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'publisherB'"),n("span",{class:"token punctuation"},","),s(" pubsub"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("publisherB"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"publish"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"TYPE_A"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'stronger'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"const"),s(" publisherC "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Publisher"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'publisherC'"),n("span",{class:"token punctuation"},","),s(" pubsub"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("publisherC"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"publish"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"TYPE_C"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'a brief history of time'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"const"),s(" subscriberA "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Subscriber"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'subscriberA'"),n("span",{class:"token punctuation"},","),s(" pubsub"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("subscriberA"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"subscribe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"TYPE_A"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token parameter"},"res"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("    console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'subscriberA received'"),n("span",{class:"token punctuation"},","),s(" res"),n("span",{class:"token punctuation"},")")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"const"),s(" subscriberB "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Subscriber"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'subscriberB'"),n("span",{class:"token punctuation"},","),s(" pubsub"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("subscriberB"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"subscribe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"TYPE_C"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token parameter"},"res"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("    console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'subscriberB received'"),n("span",{class:"token punctuation"},","),s(" res"),n("span",{class:"token punctuation"},")")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"const"),s(" subscriberC "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Subscriber"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'subscriberC'"),n("span",{class:"token punctuation"},","),s(" pubsub"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("subscriberC"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"subscribe"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"TYPE_B"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token parameter"},"res"),s(),n("span",{class:"token operator"},"=>"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("    console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'subscriberC received'"),n("span",{class:"token punctuation"},","),s(" res"),n("span",{class:"token punctuation"},")")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[s("pubsub"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"notify"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"TYPE_A"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("pubsub"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"notify"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"TYPE_B"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("pubsub"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"notify"),n("span",{class:"token punctuation"},"("),n("span",{class:"token constant"},"TYPE_C"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"})])]),n("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1)])),_:1}),a[4]||(a[4]=p('<h2 id="观察者模式-源码" tabindex="-1"><a class="header-anchor" href="#观察者模式-源码"><span>观察者模式(源码)</span></a></h2><div class="hint-container tip"><p class="hint-container-title">提示</p><p>观察者模式（Observer Pattern）是一种行为设计模式，主要用于定义对象间的一对多依赖关系，使得当一个对象状态改变时，所有依赖它的对象都会自动收到通知并更新。以下是正确理解观察者模式的关键点：</p></div><ol><li>核心概念</li></ol><p>Subject（主题）：被观察的对象，维护一个观察者列表，并提供添加、删除和通知观察者的方法。 Observer（观察者）：依赖主题的对象，当主题状态变化时，观察者会收到通知并更新自身状态。</p><ol start="2"><li>工作流程</li></ol><p>注册观察者：观察者通过主题的注册方法将自己添加到观察者列表中。 状态变化：主题状态发生变化时，调用通知方法。 通知观察者：主题遍历观察者列表，调用每个观察者的更新方法。 更新状态：观察者根据收到的通知更新自身状态。</p><ol start="3"><li>优点</li></ol><p>解耦：主题和观察者之间松耦合，主题无需知道观察者的具体实现。 动态关系：观察者可以随时注册或注销，灵活性高。 广播通信：主题状态变化时，所有观察者都能收到通知。</p><ol start="4"><li>缺点</li></ol><p>性能问题：观察者过多时，通知过程可能耗时。 循环依赖：不当使用可能导致循环调用，引发系统崩溃。 更新顺序：观察者的更新顺序不确定，可能影响系统行为。</p><ol start="5"><li>应用场景</li></ol><p>事件驱动系统：如GUI中的按钮点击事件。 发布-订阅系统：如消息队列、事件总线。 数据同步：如多个视图同步更新</p>',12)),e(t,{id:"code-demo-69",type:"normal",code:"eJyVU0lP20AU/itTqwdXqoySIyi99dwDx7oSxpmUVMFGnkmqKopkqEAJCuIAhLBI7CJil0AQcPg3mXFyyl9gxmMbOwuC07Oe37e8ZYoSRtK4NDYGOqcL5HqvYy/SxgFpraoGy7WbTvew3muVJ/PTf6COe62Kaug5DSHgZ0BRNQDQTQNhK69j05K/iBQAeCaLFHMaQasALQRS4OevCcBIyWWdLDRCOV5cUg0e2E/64JDl/dhPLZ3+4bPIAd0IEWUuj2Zeiybi3O6p0906jnFbcNYswPfSsx769DLZHBY4kPoGePiUSvE41EDX3nb3TmjFpruVmA3DxNnMv8AGktMa1ka1mDGt75r+2qUv7H0r+TkGhQIfqnsGohtmCw20IhsNUoMrNbRZGLfDM2waPPT1SHfuaO2G1h7p7UavVSXPa+KI3OV7as+T1Tqp1ujmfefmv7ve4Jio5UCDi5s5qOTM3/LU52IoWWIL02G2ANOA149PffXiQKfk6pCWH9zz67Zz5O7Psw55NwD5N8uMw7/BBcscLVDlHeI8RRYjUMFwEz4uvBZVCj4TqsRZ4vXJ0fVJUe+p0tsGWapGVH2XyrC7T3DYWwXJkHdw7Gwd4gKHiPVfoCpNYrYW4HfmMYr3027a7ebZEIoRb8mzLOa7tEIvDj5sIRyWVHoBu70Ctg=="},{default:c(()=>a[1]||(a[1]=[n("div",{class:"language-typescript line-numbers-mode","data-highlighter":"prismjs","data-ext":"ts","data-title":"ts"},[n("pre",null,[n("code",null,[n("span",{class:"line"},[n("span",{class:"token comment"},"// 观察者模式")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token comment"},"// 主题（Subject）")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"Subject"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token function"},"constructor"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("observers "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"["),n("span",{class:"token punctuation"},"]"),n("span",{class:"token punctuation"},";"),s(),n("span",{class:"token comment"},"// 存储观察者")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token comment"},"// 添加观察者")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token function"},"addObserver"),n("span",{class:"token punctuation"},"("),s("observer"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("observers"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"push"),n("span",{class:"token punctuation"},"("),s("observer"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token comment"},"// 移除观察者")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token function"},"removeObserver"),n("span",{class:"token punctuation"},"("),s("observer"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("observers "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("observers"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"filter"),n("span",{class:"token punctuation"},"("),s("obs "),n("span",{class:"token operator"},"=>"),s(" obs "),n("span",{class:"token operator"},"!=="),s(" observer"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token comment"},"// 通知所有观察者")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token function"},"notifyObservers"),n("span",{class:"token punctuation"},"("),s("data"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("observers"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"forEach"),n("span",{class:"token punctuation"},"("),s("observer "),n("span",{class:"token operator"},"=>"),s(" observer"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"update"),n("span",{class:"token punctuation"},"("),s("data"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[n("span",{class:"token comment"},"// 观察者（Observer）")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"class"),s(),n("span",{class:"token class-name"},"Observer"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token function"},"constructor"),n("span",{class:"token punctuation"},"("),s("name"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("name "),n("span",{class:"token operator"},"="),s(" name"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token comment"},"// 更新方法，当主题状态变化时调用")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token function"},"update"),n("span",{class:"token punctuation"},"("),s("data"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token punctuation"},"{")]),s(`
`),n("span",{class:"line"},[s("    "),n("span",{class:"token builtin"},"console"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"log"),n("span",{class:"token punctuation"},"("),n("span",{class:"token template-string"},[n("span",{class:"token template-punctuation string"},"`"),n("span",{class:"token interpolation"},[n("span",{class:"token interpolation-punctuation punctuation"},"${"),n("span",{class:"token keyword"},"this"),n("span",{class:"token punctuation"},"."),s("name"),n("span",{class:"token interpolation-punctuation punctuation"},"}")]),n("span",{class:"token string"}," received data:"),n("span",{class:"token template-punctuation string"},"`")]),n("span",{class:"token punctuation"},","),s(" data"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("  "),n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token punctuation"},"}")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[n("span",{class:"token comment"},"// 客户端代码")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"const"),s(" subject "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Subject"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[n("span",{class:"token comment"},"// 创建观察者")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"const"),s(" observer1 "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Observer"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Observer1"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[n("span",{class:"token keyword"},"const"),s(" observer2 "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"new"),s(),n("span",{class:"token class-name"},"Observer"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"Observer2"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[n("span",{class:"token comment"},"// 注册观察者")]),s(`
`),n("span",{class:"line"},[s("subject"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"addObserver"),n("span",{class:"token punctuation"},"("),s("observer1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"},[s("subject"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"addObserver"),n("span",{class:"token punctuation"},"("),s("observer2"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[n("span",{class:"token comment"},"// 主题状态变化，通知观察者")]),s(`
`),n("span",{class:"line"},[s("subject"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"notifyObservers"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"State 1"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[n("span",{class:"token comment"},"// 移除一个观察者")]),s(`
`),n("span",{class:"line"},[s("subject"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"removeObserver"),n("span",{class:"token punctuation"},"("),s("observer1"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"},[n("span",{class:"token comment"},"// 再次通知观察者")]),s(`
`),n("span",{class:"line"},[s("subject"),n("span",{class:"token punctuation"},"."),n("span",{class:"token function"},"notifyObservers"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},'"State 2"'),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";")]),s(`
`),n("span",{class:"line"}),s(`
`),n("span",{class:"line"})])]),n("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1)])),_:1}),a[5]||(a[5]=n("h2",{id:"单点登录",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#单点登录"},[n("span",null,"单点登录")])],-1)),a[6]||(a[6]=n("h3",{id:"sso单点登录",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#sso单点登录"},[n("span",null,"SSO单点登录")])],-1)),a[7]||(a[7]=n("p",null,"sso需要一个独立的认证中心，只有认证中心能接受用户的用户名密码等安全信息，其它系统不提供接口，只接受认证中心的间接授权。 间接授权通过令牌实现，sso认证中心验证用户的用户名密码没有问题，创建授权令牌，在接下来的跳转过程中，授权令牌作为参数发送给各个子系统，子系统拿到令牌，即得到了授权，可以创建局部会话模具部会话登录方式与单系统的登录方式相同。",-1))])}const m=l(k,[["render",r],["__file","index.html.vue"]]),v=JSON.parse('{"path":"/interview/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","title":"","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"订阅发布(源码)","slug":"订阅发布-源码","link":"#订阅发布-源码","children":[]},{"level":2,"title":"观察者模式(源码)","slug":"观察者模式-源码","link":"#观察者模式-源码","children":[]},{"level":2,"title":"单点登录","slug":"单点登录","link":"#单点登录","children":[{"level":3,"title":"SSO单点登录","slug":"sso单点登录","link":"#sso单点登录","children":[]}]}],"git":{"updatedTime":1739786482000,"contributors":[{"name":"LiHegui","username":"LiHegui","email":"1487647822@qq.com","commits":4,"url":"https://github.com/LiHegui"}]},"filePathRelative":"interview/设计模式/index.md"}');export{m as comp,v as data};
