import{_ as s,c as a,a as p,o as t}from"./app-DPjPDnzl.js";const e={};function o(c,n){return t(),a("div",null,n[0]||(n[0]=[p(`<h2 id="é«˜é˜¶ç»„ä»¶-å·²å‘-æå’Œè´µ" tabindex="-1"><a class="header-anchor" href="#é«˜é˜¶ç»„ä»¶-å·²å‘-æå’Œè´µ"><span>é«˜é˜¶ç»„ä»¶ï¼ˆå·²å‘-æå’Œè´µï¼‰</span></a></h2><h3 id="é«˜é˜¶ç»„ä»¶æ˜¯ä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#é«˜é˜¶ç»„ä»¶æ˜¯ä»€ä¹ˆ"><span>é«˜é˜¶ç»„ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ</span></a></h3><div class="hint-container tip"><p class="hint-container-title">æç¤º</p><p>é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰æ˜¯ React ä¸­ç”¨äºå¤ç”¨ç»„ä»¶é€»è¾‘çš„ä¸€ç§é«˜çº§æŠ€å·§ã€‚HOC è‡ªèº«ä¸æ˜¯ React API çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒæ˜¯ä¸€ç§åŸºäº React çš„ç»„åˆç‰¹æ€§è€Œå½¢æˆçš„è®¾è®¡æ¨¡å¼ã€‚</p><p><strong>é«˜é˜¶ç»„ä»¶æ˜¯å‚æ•°ä¸ºç»„ä»¶ï¼Œè¿”å›å€¼ä¸ºæ–°ç»„ä»¶çš„å‡½æ•°</strong></p></div><p>åœ¨æ­¤æœŸé—´ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹è¯¥ç»„ä»¶è¿›è¡Œpropså¤„ç†ï¼Œäº‹ä»¶å¤„ç†ç­‰å·¥ä½œ</p><h3 id="è®¤è¯†é«˜é˜¶ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#è®¤è¯†é«˜é˜¶ç»„ä»¶"><span>è®¤è¯†é«˜é˜¶ç»„ä»¶</span></a></h3><ol><li><p>å¤ç”¨é€»è¾‘</p><p>å¯¹ç»„ä»¶è¿›è¡ŒåŠ å·¥å¤„ç†ï¼Œæ ¹æ®éœ€æ±‚æ¥å®šåˆ¶ä¸“å±åŒ–çš„HOC</p></li><li><p>å¼ºåŒ–props</p><p>åŠ«æŒä¸Šä¸€å±‚ä¼ è¿‡æ¥çš„props,æ··å…¥æ–°çš„props</p></li><li><p>èµ‹èƒ½ç»„ä»¶</p><p>HOCæœ‰ä¸€é¡¹ç‹¬ç‰¹çš„ç‰¹æ€§ï¼Œå°±æ˜¯å¯ä»¥ç»™è¢«HOCåŒ…è£¹çš„ä¸šåŠ¡ç»„ä»¶ï¼Œæä¾›ä¸€äº›æ‹“å±•åŠŸèƒ½ï¼Œæ¯”å¦‚è¯´é¢å¤–çš„ç”Ÿå‘½å‘¨æœŸï¼Œé¢å¤–çš„äº‹ä»¶ï¼Œä½†æ˜¯è¿™ç§HOCï¼Œå¯èƒ½éœ€è¦å’Œä¸šåŠ¡ç»„ä»¶ç´§å¯†ç»“åˆ</p></li><li><p>æ§åˆ¶æ¸²æŸ“</p><p>åŠ«æŒæ¸²æŸ“æ˜¯hocä¸€ä¸ªç‰¹æ€§ï¼Œåœ¨wrapComponentåŒ…è£…ç»„ä»¶ä¸­ï¼Œå¯ä»¥å¯¹åŸæ¥çš„ç»„ä»¶ï¼Œè¿›è¡Œæ¡ä»¶æ¸²æŸ“ï¼ŒèŠ‚æµæ¸²æŸ“ï¼Œæ‡’åŠ è½½ç­‰åŠŸèƒ½</p></li></ol><p><strong>ä½¿ç”¨æ–¹å¼</strong></p><ul><li><p>è£…é¥°å™¨æ¨¡å¼</p></li><li><p>å‡½æ•°åŒ…è£¹</p></li></ul><p><strong>ä¸¤ç§ä¸åŒçš„é«˜é˜¶ç»„ä»¶</strong></p><ul><li><p>æ­£å‘çš„å±æ€§ä»£ç†</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">  <span class="token keyword">function</span> <span class="token constant">HOC</span><span class="token punctuation">(</span><span class="token parameter">WrapComponent</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">Advance</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span></span>
<span class="line">      state<span class="token operator">=</span><span class="token punctuation">{</span></span>
<span class="line">          <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;loong&#39;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">      <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">          <span class="token keyword">return</span> <span class="token operator">&lt;</span>WrapComponent  <span class="token punctuation">{</span> <span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>props <span class="token punctuation">}</span> <span class="token punctuation">{</span> <span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token punctuation">}</span>  <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä¸Šé¢è¿™ä¸ªä¾‹å­ï¼Œreturn è¿”å›ç»“æœæ˜¯çˆ¶ç»„ä»¶ï¼ˆä»£ç†ç»„ä»¶ï¼‰å¯¹å­ç»„ä»¶ï¼ˆä¸šåŠ¡ç»„ä»¶ï¼‰çš„ä¸€ç³»åˆ—æ“ä½œ</p><p><strong>åœ¨ fiber treeä¸Šï¼Œå…ˆmountedç»„ä»¶ï¼Œç„¶åæ‰æ˜¯æˆ‘ä»¬çš„ä¸šåŠ¡ç»„ä»¶</strong></p></li><li><p>åå‘çš„ç»„ä»¶ç»§æ‰¿</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span> hello<span class="token punctuation">,</span>world  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">function</span> <span class="token constant">HOC</span><span class="token punctuation">(</span><span class="token parameter">Component</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">wrapComponent</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token constant">HOC</span><span class="token punctuation">(</span>Index<span class="token punctuation">)</span> </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>HOCé‡‡ç”¨ç»§æ‰¿çš„æ–¹å¼, ä»£ç†ç»„ä»¶ç»§æ‰¿äº†ä¸šåŠ¡ç»„ä»¶çš„æœ¬èº«ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™ç›´æ¥å®ä¾‹åŒ–ä»£ç†ç»„ä»¶HOCå³å¯</p></li></ul><h3 id="ç¼–å†™é«˜é˜¶ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#ç¼–å†™é«˜é˜¶ç»„ä»¶"><span>ç¼–å†™é«˜é˜¶ç»„ä»¶</span></a></h3><p>å¾ˆå¤šæ–‡ç« å¯¹å…¶æœ‰å¾ˆå¤šåˆ†ç±»ï¼Œæˆ‘è¿™é‡Œå°±æŒ‰ç…§æˆ‘çš„ç†è§£å»åˆ†ç±»</p><ol><li><p>å¢å¼ºprops æ··å…¥props ä»£ç†ç»„ä»¶stateçŠ¶æ€ä¼šæ··å…¥ï¼ˆä¸Šé¢æœ‰æ··å…¥çš„ä¾‹å­ï¼‰, åˆæ¬¡ä¹‹å¤–æˆ‘ä»¬è¿˜å¯ä»¥è¿›è¡Œæ§åˆ¶stateçš„æ›´æ–°</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">classHOC</span><span class="token punctuation">(</span><span class="token parameter">WrapComponent</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> <span class="token keyword">class</span>  <span class="token class-name">Idex</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token operator">=</span><span class="token punctuation">{</span></span>
<span class="line">                <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;alien&#39;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token function">changeName</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token operator">&lt;</span>WrapComponent <span class="token punctuation">{</span> <span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>props <span class="token punctuation">}</span>  <span class="token punctuation">{</span> <span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token punctuation">}</span> changeName<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changeName</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">Index</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> <span class="token punctuation">[</span> value <span class="token punctuation">,</span>setValue <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">const</span> <span class="token punctuation">{</span> name <span class="token punctuation">,</span>changeName <span class="token punctuation">}</span> <span class="token operator">=</span> props</span>
<span class="line">    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>   hello<span class="token punctuation">,</span>world <span class="token punctuation">,</span> my name is <span class="token punctuation">{</span> name <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">        æ”¹å˜name <span class="token operator">&lt;</span>input onChange<span class="token operator">=</span><span class="token punctuation">{</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token function">setValue</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>  <span class="token function">changeName</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">}</span>  <span class="token operator">&gt;</span>ç¡®å®š<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">classHOC</span><span class="token punctuation">(</span>Index<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬çœ‹è¿™ä¸ªä¾‹å­ï¼Œä»£ç†ç»„ä»¶ä¸­<code>changeName={this.changeName.bind(this)} </code>ï¼Œç»‘å®šchangeNameæ–¹æ³•ã€‚ç”¨æ¥æ›´æ–°nameå±æ€§ï¼ˆä»£ç†ç»„ä»¶ä¸­ï¼Œè¯´å®è¯è®©æˆ‘æƒ³èµ·æ¥äº†é—­åŒ…ï¼‰ã€‚</p><p>é¢˜å¤–è¯ï¼šä¸Šé¢çš„ä¾‹å­ä¸­changeNameç»‘å®šçš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç„¶ååˆ©ç”¨bindæ”¹å˜å…¶thisæŒ‡å‘ï¼ˆè¿”å›å€¼æ˜¯ä¸€ä¸ªå‡½æ•°ï¼‰ï¼Œåœ¨Indexç»„ä»¶ä½¿ç”¨çš„æ—¶å€™<code>&lt;button onClick={ ()=&gt; changeName(value) } &gt;ç¡®å®š&lt;/button&gt;</code> , æ‰å¯ä»¥æ­£ç¡®æ›´æ–°åˆ°ä»£ç†ç»„å»ºçš„stateã€‚å¦‚æœä¸ç»‘å®šå°±ä¼šæ‰¾ä¸åˆ°è¯¥æ–¹æ³•ã€‚</p></li><li><p>æ§åˆ¶æ¸²æŸ“ ä»£ç†ç»„ä»¶é€šè¿‡å¤„ç†å¯ä»¥æ§åˆ¶å­ç»„ä»¶æ˜¯å¦æ˜¾ç¤º</p><p>å¯ä»¥é€šè¿‡å˜é‡æ§åˆ¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å…¶å®ƒæ–¹å¼ã€‚è¾¾åˆ°æ§åˆ¶æ¸²æŸ“çš„ç›®çš„å°±å¯ä»¥äº†</p><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¼˜åŒ–çš„ä¾‹å­ğŸ’¨</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">    <span class="token keyword">function</span> <span class="token constant">HOC</span> <span class="token punctuation">(</span><span class="token parameter">Component</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">renderWrapComponent</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">const</span> <span class="token punctuation">{</span> num <span class="token punctuation">}</span> <span class="token operator">=</span> props</span>
<span class="line">            <span class="token keyword">const</span> RenderElement <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>  <span class="token operator">&lt;</span>Component <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span>  <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token punctuation">,</span><span class="token punctuation">[</span> num <span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token keyword">return</span> RenderElement</span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">å½“å‰ç»„ä»¶æ˜¯å¦æ¸²æŸ“</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>hello<span class="token punctuation">,</span>world<span class="token punctuation">,</span> my name is alien <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">const</span> IndexHoc <span class="token operator">=</span> <span class="token constant">HOC</span><span class="token punctuation">(</span>Index<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">const</span> <span class="token punctuation">[</span> num <span class="token punctuation">,</span>setNumber <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">const</span> <span class="token punctuation">[</span> num1 <span class="token punctuation">,</span>setNumber1 <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">const</span> <span class="token punctuation">[</span> num2 <span class="token punctuation">,</span>setNumber2 <span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>IndexHoc  num<span class="token operator">=</span><span class="token punctuation">{</span> num <span class="token punctuation">}</span> num1<span class="token operator">=</span><span class="token punctuation">{</span>num1<span class="token punctuation">}</span> num2<span class="token operator">=</span><span class="token punctuation">{</span> num2 <span class="token punctuation">}</span>  <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setNumber</span><span class="token punctuation">(</span>num <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">}</span> <span class="token operator">&gt;</span>num<span class="token operator">++</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setNumber1</span><span class="token punctuation">(</span>num1 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">}</span> <span class="token operator">&gt;</span>num1<span class="token operator">++</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span></span>
<span class="line">            <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setNumber2</span><span class="token punctuation">(</span>num2 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">}</span> <span class="token operator">&gt;</span>num2<span class="token operator">++</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span></span>
<span class="line">        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢çš„ä¾‹å­åº”è¯¥å¾ˆå¥½ç†è§£ï¼Œä»£ç†ç»„ä»¶é€šè¿‡useMemoé’©å­æ¥ä¾æ®propsä¼ å…¥çš„num,æ¥å†³å®šæ˜¯å¦æ›´æ–°å­ç»„ä»¶</p></li><li><p>åŠ«æŒç”Ÿå‘½å‘¨æœŸ</p></li></ol><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token constant">HOC</span> <span class="token punctuation">(</span><span class="token parameter">Component</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">const</span> proDidMount <span class="token operator">=</span> <span class="token class-name">Component</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>componentDidMount </span>
<span class="line">  <span class="token class-name">Component</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">componentDidMount</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;åŠ«æŒç”Ÿå‘½å‘¨æœŸï¼šcomponentDidMount&#39;</span><span class="token punctuation">)</span></span>
<span class="line">     <span class="token function">proDidMount</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">wrapComponent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span></span>
<span class="line">      <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token operator">&lt;</span>Component <span class="token punctuation">{</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">}</span>  <span class="token operator">/</span><span class="token operator">&gt;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¹Ÿæ˜¯å¾ˆå¥½ç†è§£ï¼Œä»£ç†ç»„ä»¶ä¿å­˜å­ç»„å»ºçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œç„¶åé‡æ–°è®¾ç½®å¯¹åº”çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°</p><ol start="4"><li>äº‹ä»¶å¤„ç†</li></ol><p>æˆ‘ä»¬æ¥çœ‹åˆ†æä¸‹é¢è¿™ä¸ªä¾‹å­ğŸ’¨</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">function</span> <span class="token function">ClickHoc</span> <span class="token punctuation">(</span><span class="token parameter">Component</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">return</span>  <span class="token keyword">function</span> <span class="token function">Wrap</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> dom <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line">     <span class="token keyword">const</span> <span class="token function-variable function">handerClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;å‘ç”Ÿç‚¹å‡»äº‹ä»¶&#39;</span><span class="token punctuation">)</span> </span>
<span class="line">     dom<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span>handerClick<span class="token punctuation">)</span></span>
<span class="line">     <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> dom<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span>handerClick<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">return</span>  <span class="token operator">&lt;</span>div ref<span class="token operator">=</span><span class="token punctuation">{</span>dom<span class="token punctuation">}</span> <span class="token operator">&gt;</span><span class="token operator">&lt;</span>Component  <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å…¶å®å°±æ˜¯ä»£ç†ç»„ä»¶ä¸Šé¢åŠ äº†ä¸€ä¸ªclickç›‘å¬äº‹ä»¶</p><ol start="5"><li><p>è·å–è‡ªå®šä¹‰ç»„ä»¶ref</p><p>æˆ‘ä»¬çŸ¥é“åœ¨è‡ªå®šä¹‰ç»„ä»¶ä¸Šé¢refæ˜¯æ— ç”¨çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»£ç†ç»„ä»¶åŒ…è£¹ä¸šåŠ¡ç»„ä»¶å³å¯ï¼Œ<code>ref={dom}</code>åœ¨ä»£ç†ç»„ä»¶ä¸Šï¼Œå³å¯è·å–</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"> <span class="token keyword">return</span>  <span class="token operator">&lt;</span>div ref<span class="token operator">=</span><span class="token punctuation">{</span>dom<span class="token punctuation">}</span> <span class="token operator">&gt;</span><span class="token operator">&lt;</span>Component  <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ol><h3 id="é«˜é˜¶ç»„ä»¶å®è·µ" tabindex="-1"><a class="header-anchor" href="#é«˜é˜¶ç»„ä»¶å®è·µ"><span>é«˜é˜¶ç»„ä»¶å®è·µ</span></a></h3><p>å¯ä»¥å‚å¡<code>æ¨èæ–‡ç« </code>ä¸­çš„è¿™ä¸€ç« èŠ‚ï¼Œå†™çš„å¾ˆè¯¦ç»†</p><h3 id="æ¨èæ–‡ç« " tabindex="-1"><a class="header-anchor" href="#æ¨èæ–‡ç« "><span>æ¨èæ–‡ç« </span></a></h3><p><a href="https://juejin.cn/post/6940422320427106335?searchId=20240314203945EF18D3514FDD63A655E1#heading-44" target="_blank" rel="noopener noreferrer">ã€Œreactè¿›é˜¶ã€ä¸€æ–‡åƒé€Reacté«˜é˜¶ç»„ä»¶(HOC)</a></p>`,24)]))}const i=s(e,[["render",o],["__file","é«˜é˜¶ç»„ä»¶.html.vue"]]),u=JSON.parse('{"path":"/interview/React/%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6.html","title":"","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"é«˜é˜¶ç»„ä»¶ï¼ˆå·²å‘-æå’Œè´µï¼‰","slug":"é«˜é˜¶ç»„ä»¶-å·²å‘-æå’Œè´µ","link":"#é«˜é˜¶ç»„ä»¶-å·²å‘-æå’Œè´µ","children":[{"level":3,"title":"é«˜é˜¶ç»„ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ","slug":"é«˜é˜¶ç»„ä»¶æ˜¯ä»€ä¹ˆ","link":"#é«˜é˜¶ç»„ä»¶æ˜¯ä»€ä¹ˆ","children":[]},{"level":3,"title":"è®¤è¯†é«˜é˜¶ç»„ä»¶","slug":"è®¤è¯†é«˜é˜¶ç»„ä»¶","link":"#è®¤è¯†é«˜é˜¶ç»„ä»¶","children":[]},{"level":3,"title":"ç¼–å†™é«˜é˜¶ç»„ä»¶","slug":"ç¼–å†™é«˜é˜¶ç»„ä»¶","link":"#ç¼–å†™é«˜é˜¶ç»„ä»¶","children":[]},{"level":3,"title":"é«˜é˜¶ç»„ä»¶å®è·µ","slug":"é«˜é˜¶ç»„ä»¶å®è·µ","link":"#é«˜é˜¶ç»„ä»¶å®è·µ","children":[]},{"level":3,"title":"æ¨èæ–‡ç« ","slug":"æ¨èæ–‡ç« ","link":"#æ¨èæ–‡ç« ","children":[]}]}],"git":{"updatedTime":1738722167000,"contributors":[{"name":"LiHegui","username":"LiHegui","email":"1487647822@qq.com","commits":1,"url":"https://github.com/LiHegui"}]},"filePathRelative":"interview/React/é«˜é˜¶ç»„ä»¶.md"}');export{i as comp,u as data};
