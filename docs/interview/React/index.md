# Reacté¢è¯•é¢˜

## è°ˆè°ˆä½ å¯¹Reactçš„ç†è§£

Reactæ˜¯æ„å»ºç”¨æˆ·ç•Œé¢çš„JavaScriptåº“ï¼Œåªæä¾›äº†UIå±‚é¢çš„è§£å†³æ–¹æ¡ˆã€‚
éµå¾ªç»„ä»¶è®¾è®¡æ¨¡å¼ï¼Œå‡½æ•°å¼ç¼–ç¨‹çš„ç¼–ç¨‹æ¦‚å¿µ

ç‰¹ç‚¹ï¼š 
- JSXçš„è¯­æ³•
    
- å•å‘æ•°æ®æµ
  > Reactä¸­çš„å•å‘æ•°æ®ç»‘å®šæ˜¯æŒ‡æ•°æ®æµä»ä¸Šè‡³ä¸‹ï¼Œä»çˆ¶ç»„ä»¶æµå‘å­ç»„ä»¶ã€‚
  > çˆ¶ç»„ä»¶è´Ÿè´£ä¼ é€’æ•°æ®ç»™å­ç»„ä»¶ï¼Œå­ç»„ä»¶æ ¹æ®è¿™äº›æ•°æ®è¿›è¡Œæ¸²æŸ“ã€‚
  >è¿™ç§æ•°æ®æµæ–¹å¼æœ‰åŠ©äºç®€åŒ–ç»„ä»¶é—´çš„å…³ç³»ï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯è¯»æ€§ã€‚

  å­ç»„ä»¶ä¸èƒ½ç›´æ¥ä¿®æ”¹çˆ¶ç»„ä»¶çš„æ•°æ®ï¼Œå¯ä»¥é€‰æ‹©é€šçŸ¥çˆ¶ç»„ä»¶ï¼ˆçˆ¶ç»„ä»¶ä¸­å†™å¥½æ›´æ–°å‡½æ•°ï¼‰è¿›è¡Œä¿®æ”¹

- è™šæ‹ŸDOM

- å£°æ˜å¼ç¼–ç¨‹
- component æ›´æ³¨é‡æŠ½ç¦»å’Œç»„ä»¶åŒ–

  ç»„ä»¶å¼å¼€å‘ï¼Œæé«˜ä»£ç å¤ç”¨ç‡
  åº”è¯¥å…·æœ‰çš„ç‰¹ç‚¹ï¼šå¯ç»„åˆï¼Œå¯é‡ç”¨ï¼Œå¯ç»´æŠ¤

  æ³¨æ„ï¼ŒReactç»„ä»¶é¦–å­—æ¯è¦å¤§å†™ï¼Œå°å†™çš„è¯ä¼šè¢«è®¤ä¸ºæ˜¯åŸç”ŸDOMæ ‡ç­¾ã€‚ï¼ˆè¦é€šè¿‡Babelå»å¯¹JSXè¿›è¡Œè½¬åŒ–ä¸ºå¯¹åº”çš„JSå¯¹è±¡ï¼Œæ‰èƒ½è®©æµè§ˆå™¨è¯†åˆ«ã€‚æ­¤æ—¶å°±ä¼šæœ‰ä¸ªä¾æ®å»åˆ¤æ–­æ˜¯åŸç”ŸDOMæ ‡ç­¾ï¼Œè¿˜æ˜¯Reactç»„ä»¶ï¼Œè€Œè¿™ä¸ªä¾æ®å°±æ˜¯æ ‡ç­¾çš„é¦–å­—æ¯ï¼‰

  React.Fragment ç­‰ä»·äº<></>

  ç»„ä»¶åŒ–æ€æƒ³ï¼Œé¡µé¢ä¼šè¢«åˆ‡åˆ†æˆä¸€äº›ç‹¬ç«‹çš„ã€å¯å¤ç”¨çš„ç»„ä»¶

## JSXè½¬æˆçœŸå®DOMçš„è¿‡ç¨‹

JSXæ˜¯JavaScriptçš„ä¸€ç§è¯­æ³•æ‹“å±•ï¼Œå®ƒå’Œæ¨¡æ¿è¯­è¨€å¾ˆåƒï¼Œä½†æ˜¯å®ƒå…·å¤‡å……åˆ†çš„JavaScriptçš„èƒ½åŠ›

ç»è¿‡babelçš„å¤„ç†

1. JSX ä¼šè¢«ç¼–è¯‘ä¸ºReact.createElement(), React.createElement()å°†ä¼šè¿”å›ä¸€ä¸ªå«åšReact Elementçš„JSå¯¹è±¡
  è¿™é‡Œçš„ç¼–è¯‘å°±æ˜¯æŒ‡babel
  ```javascript
  /**
  * React.createElement
  * @param {*} type ç”¨äºæ ‡è¯†èŠ‚ç‚¹çš„ç±»å‹
  * @param {*} config ä»¥å¯¹è±¡å½¢å¼ä¼ å…¥ï¼Œç»„ä»¶æ‰€æœ‰çš„å±æ€§éƒ½ä¼šä»¥é”®å€¼å¯¹çš„å½¢å¼å‚¨å­˜åˆ°conigå¯¹è±¡ä¸­
  * @param {*} children ä»¥å¯¹è±¡çš„å½¢å¼ä¼ å…¥ï¼Œï¼Œå®ƒè®°å½•çš„æ˜¯ç»„ä»¶æ ‡ç­¾ä¹‹é—´çš„åµŒå¥—çš„å†…å®¹
  */
  export function createElement(type, config, children) {
    ...
  }
  ```
  ğŸ”¨ demo
  ```javascript
  class ClassComponent extends Component {     // ç±»å¼ç»„ä»¶
    static defaultProps = {
      color: "pink"
    };
    render() {
      return (
        <div className="border">
          <h3>ClassComponent</h3>
          <p className={this.props.color}>{this.props.name}</p >
        </div>
      );
    }
  }

  function FunctionComponent(props) {      // å‡½æ•°å¼ç»„ä»¶
    return (
      <div className="border">
        FunctionComponent
        <p>{props.name}</p >
      </div>
    );
  }

  const jsx = (                        
    <div className="border">
      <p>xx</p >                   
      <a href="#">xxx</ a>
      <FunctionComponent name="å‡½æ•°ç»„ä»¶" />
      <ClassComponent name="ç±»ç»„ä»¶" color="red" />
    </div>
  );
  ```
  è¿™é‡Œå€¼å¾—æ³¨æ„çš„æ˜¯

  JSX ->  babel -> React.createElement -> ReactElement -> è™šæ‹ŸDOM ->ReactDoM.render() -> çœŸå®DOM

  åœ¨è½¬åŒ–è¿‡ç¨‹ä¸­ï¼Œbabelåœ¨ç¼–è¯‘æ—¶ä¼šåˆ¤æ–­ JSX ä¸­ç»„ä»¶çš„é¦–å­—æ¯ï¼š

  å½“é¦–å­—æ¯ä¸ºå°å†™æ—¶ï¼Œå…¶è¢«è®¤å®šä¸ºåŸç”Ÿ DOM æ ‡ç­¾ï¼ŒcreateElement çš„ç¬¬ä¸€ä¸ªå˜é‡è¢«ç¼–è¯‘ä¸ºå­—ç¬¦ä¸²

  å½“é¦–å­—æ¯ä¸ºå¤§å†™æ—¶ï¼Œå…¶è¢«è®¤å®šä¸ºè‡ªå®šä¹‰ç»„ä»¶ï¼ŒcreateElement çš„ç¬¬ä¸€ä¸ªå˜é‡è¢«ç¼–è¯‘ä¸ºå¯¹è±¡

  React.createElementå…¶è¢«è°ƒç”¨æ—¶ä¼šä¼ â¼Šæ ‡ç­¾ç±»å‹typeï¼Œæ ‡ç­¾å±æ€§propsåŠè‹¥å¹²å­å…ƒç´ children

2. æœ€åï¼ŒReact.renderä¼šå°†React Elementå¯¹è±¡æ¸²æŸ“åˆ°çœŸå®çš„DOM
  æœ€åå°±æ˜¯æŒ‚è½½æŸä¸ªèŠ‚ç‚¹ä¸Š
  ReactDOM.render(<App />,  document.getElementById("root"));
  ```javascript
  ReactDOM.render(
    // éœ€è¦æ¸²æŸ“çš„å…ƒç´ (ReactElement)
    element,
    // å…ƒç´ æŒ‚è½½çš„ç›®æ ‡å®¹å™¨
    container,
    // å›è°ƒå‡½æ•°ï¼Œ å¯é€‰å‚æ•°ï¼Œï¼Œ å¯ä»¥ç”¨æ¥å¤„ç†æ¸²æŸ“ç»“æŸåçš„é€»è¾‘
    callback
  )
  ```

æ•´ä¸ªæµç¨‹å›¾è§£

![](./img/render.png)



## React ç”Ÿå‘½å‘¨æœŸ

ç»„ä»¶åˆå§‹åŒ– -> renderæ–¹æ³• 

æ¸²æŸ“å·¥ä½œæµ
æŒ‡çš„æ˜¯ä»ç»„ä»¶æ•°æ®æ”¹å˜åˆ°ç»„ä»¶å®é™…æ›´æ–°å‘ç”Ÿçš„è¿‡ç¨‹

React15

æŒ‚è½½ -> æ›´æ–° -> å¸è½½

- constructor()
- componentWillReceiveProps()
  çˆ¶ç»„ä»¶è§¦å‘æ›´æ–°æ—¶è§¦å‘ï¼ˆä¸ä¸€å®šæ˜¯ç›¸å…³çš„propsï¼‰
- componentWillUnmount
  ç»„ä»¶å¸è½½æ—¶è§¦å‘ï¼ˆç»„ä»¶è¢«ç§»é™¤ ï¼‰

React16

åºŸå¼ƒäº†componentWillMount

- getDerivedStateFromProps, æ›¿ä»£compponentWillReceiveProps
  ä½¿ç”¨Propsæ¥æ´¾ç”Ÿ/æ›´æ–°state
  åœ¨æ›´æ–°å’ŒæŒ‚è½½ä¸¤ä¸ªé˜¶æ®µéƒ½ä¼šè§¦å‘
 

## è¯´è¯´ Real DOM å’Œ Virtual DOM çš„åŒºåˆ«ï¼Ÿä¼˜ç¼ºç‚¹ï¼Ÿ

è™šæ‹ŸDomæ˜¯`React.createElement`åˆ›å»ºçš„å¯¹è±¡ï¼Œæ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„DOMèŠ‚ç‚¹ï¼Œæ˜¯ä¸€ä¸ªJSå¯¹è±¡ï¼Œå®ƒæ˜¯ä¸€ä¸ªè½»é‡çº§çš„JavaScriptå¯¹è±¡ï¼Œç”¨äºæè¿°çœŸå®DOMçš„ç»“æ„å’Œå±æ€§ã€‚

**å¯¹æ¯”**
- åœ¨ä¼ ç»Ÿçš„Webåº”ç”¨ä¸­ï¼Œæ•°æ®çš„å˜åŒ–ä¼šå®æ—¶åœ°æ›´æ–°åˆ°ç”¨æˆ·ç•Œé¢ä¸­ï¼Œäºæ˜¯æ¯æ¬¡æ•°æ®å¾®å°çš„å˜åŒ–éƒ½ä¼šå¼•èµ·DOMçš„æ¸²æŸ“ã€‚

- è™šæ‹ŸDOMçš„ç›®åœ°ï¼šæ˜¯å°†æ‰€æœ‰çš„æ“ä½œèšé›†åˆ°ä¸€å—ï¼Œè®¡ç®—å‡ºæ‰€æœ‰çš„å˜åŒ–åï¼Œç»Ÿä¸€æ›´æ–°ä¸€æ¬¡è™šæ‹ŸDOM

ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªé¡µé¢å¦‚æœæœ‰500æ¬¡å˜åŒ–ï¼Œæ²¡æœ‰è™šæ‹ŸDOMçš„å°±ä¼šæ¸²æŸ“500æ¬¡ï¼Œè€Œè™šæ‹ŸDOMåªéœ€è¦æ¸²æŸ“ä¸€æ¬¡ï¼Œä»è¿™ç‚¹ä¸Šæ¥çœ‹ï¼Œé¡µé¢è¶Šå¤æ‚ï¼Œè™šæ‹ŸDOMçš„ä¼˜åŠ¿è¶Šå¤§


**æ ¸å¿ƒä¾æ®ï¼šæµè§ˆå™¨åœ¨å¤„ç†DOMçš„æ—¶å€™ä¼šå¾ˆæ…¢ï¼Œå¤„ç†JavaScriptä¼šå¾ˆå¿«**


ç»„ä»¶æ›´æ–° -> renderæ–¹æ³• ->  ç”Ÿæˆæ–°çš„è™šæ‹ŸDOM -> diffç®—æ³• -> å®šä½ä¸¤æ¬¡çš„å·®å¼‚ -> æ¸²æŸ“çœŸå®DOM

æ¨èæ–‡ç« 

[ã€ŒReactæ·±å…¥ã€ä¸€æ–‡åƒé€è™šæ‹ŸDOMå’Œdiffç®—æ³•](https://juejin.cn/post/7116326409961734152?searchId=202502171412563BE24C347D355A9FBD37)

## useRefå’ŒuseStateçš„åŒºåˆ«

**`useRef`**

åœ¨æ•´ä¸ªç»„ä»¶ç”Ÿå‘½å‘¨æœŸä¸­å­˜å‚¨ä¸€ä¸ªå¯å˜çš„å¼•ç”¨ï¼Œè¿™ä¸ªå¼•ç”¨ä¸ä¼šè§¦å‘ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚useRefè¿”å›ä¸€ä¸ªå¯å˜çš„refå¯¹è±¡ï¼Œå…¶.currentå±æ€§è¢«åˆå§‹åŒ–ä¸ºä¼ å…¥çš„å‚æ•°ï¼ˆuseRef(initValue)ï¼‰ã€‚

  - è·å–å…ƒç´ 
    useRef è¿”å›ä¸€ä¸ªå¯å˜çš„ ref å¯¹è±¡
  - ä¿å­˜å˜é‡
    ä¿å­˜å˜é‡ï¼Œåœ¨ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ä¸ä¼šä¸¢å¤±

**`useState`**

ä½¿ç”¨, è¿”å›ä¸¤ä¸ªå€¼ï¼Œstateï¼Œå’Œæ›´æ–°å‡½æ•°



```javascript
  const [state, setState] = useState(initialValue)
```

## è¯´è¯´å¯¹Reactä¸­ç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶çš„ç†è§£ï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ



## super() å’Œ super(props) æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

åœ¨ React ä¸­ï¼Œ`super()` å’Œ `super(props)` çš„åŒºåˆ«ä¸»è¦ä½“ç°åœ¨ç±»ç»„ä»¶çš„æ„é€ å‡½æ•°ä¸­ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç† `props` æ—¶ã€‚

1. `super()`
- **ä½œç”¨**: è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚
- **ä½¿ç”¨åœºæ™¯**: å¦‚æœä½ åœ¨æ„é€ å‡½æ•°ä¸­æ²¡æœ‰ç”¨åˆ° `this.props`ï¼Œå¯ä»¥ä½¿ç”¨ `super()`ã€‚
- **ç¤ºä¾‹**:
  ```javascript
  class MyComponent extends React.Component {
    constructor(props) {
      super();
      console.log(this.props); // undefined
    }
  }
  ```
  åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ`this.props` æ˜¯ `undefined`ï¼Œå› ä¸º `super()` æ²¡æœ‰ä¼ é€’ `props` ç»™çˆ¶ç±»ã€‚

2. `super(props)`
- **ä½œç”¨**: è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œå¹¶å°† `props` ä¼ é€’ç»™çˆ¶ç±»ã€‚
- **ä½¿ç”¨åœºæ™¯**: å¦‚æœä½ åœ¨æ„é€ å‡½æ•°ä¸­éœ€è¦è®¿é—® `this.props`ï¼Œå¿…é¡»ä½¿ç”¨ `super(props)`ã€‚
- **ç¤ºä¾‹**:
  ```javascript
  class MyComponent extends React.Component {
    constructor(props) {
      super(props);
      console.log(this.props); // å¯ä»¥è®¿é—® this.props
    }
  }
  ```
  åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ`this.props` æ˜¯å¯ç”¨çš„ï¼Œå› ä¸º `super(props)` å°† `props` ä¼ é€’ç»™äº†çˆ¶ç±»ã€‚

3. æ€»ç»“
- **`super()`**: ä¸ä¼ é€’ `props`ï¼Œæ„é€ å‡½æ•°ä¸­ `this.props` ä¸º `undefined`ã€‚
- **`super(props)`**: ä¼ é€’ `props`ï¼Œæ„é€ å‡½æ•°ä¸­ `this.props` å¯ç”¨ã€‚

4. æœ€ä½³å®è·µ
- å¦‚æœä½ åœ¨æ„é€ å‡½æ•°ä¸­éœ€è¦è®¿é—® `this.props`ï¼Œä½¿ç”¨ `super(props)`ã€‚
- å¦‚æœä½ ä¸éœ€è¦è®¿é—® `this.props`ï¼Œå¯ä»¥ä½¿ç”¨ `super()`ã€‚

5. ç°ä»£ React ä¸­çš„å˜åŒ–
åœ¨ç°ä»£ React ä¸­ï¼Œä½¿ç”¨ç±»ç»„ä»¶çš„åœºæ™¯è¶Šæ¥è¶Šå°‘ï¼Œå‡½æ•°ç»„ä»¶å’Œ Hooks æ›´ä¸ºå¸¸è§ã€‚å¦‚æœä½ ä½¿ç”¨å‡½æ•°ç»„ä»¶ï¼Œå°±ä¸éœ€è¦å…³å¿ƒ `super()` å’Œ `super(props)` çš„é—®é¢˜äº†ã€‚

6. ç¤ºä¾‹ä»£ç 
```javascript
class MyComponent extends React.Component {
  constructor(props) {
    super(props); // ä¼ é€’ props
    console.log(this.props); // å¯ä»¥è®¿é—® this.props
  }
}

class AnotherComponent extends React.Component {
  constructor(props) {
    super(); // ä¸ä¼ é€’ props
    console.log(this.props); // undefined
  }
}
```

é€šè¿‡ç†è§£ `super()` å’Œ `super(props)` çš„åŒºåˆ«ï¼Œä½ å¯ä»¥æ›´å¥½åœ°æ§åˆ¶ç±»ç»„ä»¶ä¸­çš„ `props` è®¿é—®ã€‚

## è¯´è¯´Reactçš„äº‹ä»¶æœºåˆ¶ï¼Ÿ

ReactåŸºäºæµè§ˆå™¨çš„äº‹ä»¶æœºåˆ¶è‡ªèº«å®ç°äº†ä¸€å¥—äº‹ä»¶æœºåˆ¶ï¼ŒåŒ…æ‹¬äº‹ä»¶æ³¨å†Œã€äº‹ä»¶çš„åˆæˆã€äº‹ä»¶å†’æ³¡ã€äº‹ä»¶æ´¾å‘ç­‰

åœ¨Reactä¸­è¿™å¥—äº‹ä»¶æœºåˆ¶è¢«ç§°ä¹‹ä¸ºåˆæˆäº‹ä»¶

React çš„äº‹ä»¶æœºåˆ¶ä¸åŸç”Ÿ DOM äº‹ä»¶æœºåˆ¶æœ‰æ‰€ä¸åŒï¼Œå®ƒæ˜¯ React è‡ªå·±å®ç°çš„ä¸€å¥—**åˆæˆäº‹ä»¶ï¼ˆSynthetic Eventï¼‰**ç³»ç»Ÿã€‚è¿™å¥—æœºåˆ¶çš„ä¸»è¦ç›®çš„æ˜¯è§£å†³è·¨æµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜ï¼Œå¹¶æä¾›æ›´é«˜æ•ˆçš„äº‹ä»¶å¤„ç†æ–¹å¼ã€‚ä»¥ä¸‹æ˜¯ React äº‹ä»¶æœºåˆ¶çš„æ ¸å¿ƒç‰¹ç‚¹å’Œå®ç°åŸç†ï¼š

---

1. **åˆæˆäº‹ä»¶ï¼ˆSynthetic Eventï¼‰**
React çš„äº‹ä»¶æ˜¯åˆæˆäº‹ä»¶ï¼Œå®ƒæ˜¯ React å°è£…çš„ä¸€ä¸ªè·¨æµè§ˆå™¨çš„äº‹ä»¶å¯¹è±¡ã€‚åˆæˆäº‹ä»¶æ˜¯å¯¹åŸç”Ÿ DOM äº‹ä»¶çš„åŒ…è£…ï¼Œæä¾›äº†ç»Ÿä¸€çš„ API å’Œè¡Œä¸ºï¼Œç¡®ä¿åœ¨ä¸åŒæµè§ˆå™¨ä¸­è¡¨ç°ä¸€è‡´ã€‚

- **ç‰¹ç‚¹**ï¼š
  - åˆæˆäº‹ä»¶æ˜¯è·¨æµè§ˆå™¨çš„ï¼Œå…¼å®¹æ‰€æœ‰ä¸»æµæµè§ˆå™¨ã€‚
  - åˆæˆäº‹ä»¶æ˜¯æ± åŒ–çš„ï¼ˆpooledï¼‰ï¼Œå³äº‹ä»¶å¯¹è±¡ä¼šè¢«å¤ç”¨ï¼Œäº‹ä»¶å›è°ƒæ‰§è¡Œå®Œæ¯•åï¼Œäº‹ä»¶å¯¹è±¡çš„å±æ€§ä¼šè¢«æ¸…ç©ºã€‚
  - åˆæˆäº‹ä»¶é€šè¿‡äº‹ä»¶å§”æ‰˜æœºåˆ¶ç»‘å®šåˆ°æ ¹èŠ‚ç‚¹ï¼ˆå¦‚ `document` æˆ– `ReactDOM.render` çš„å®¹å™¨ï¼‰ï¼Œè€Œä¸æ˜¯ç›´æ¥ç»‘å®šåˆ°å…·ä½“çš„ DOM å…ƒç´ ã€‚

---

2. **äº‹ä»¶å§”æ‰˜**
React ä½¿ç”¨äº†**äº‹ä»¶å§”æ‰˜**æœºåˆ¶ï¼Œå°†æ‰€æœ‰äº‹ä»¶ç»‘å®šåˆ°æ ¹èŠ‚ç‚¹ï¼ˆå¦‚ `document`ï¼‰ï¼Œè€Œä¸æ˜¯ç›´æ¥ç»‘å®šåˆ°å…·ä½“çš„ DOM å…ƒç´ ã€‚å½“äº‹ä»¶è§¦å‘æ—¶ï¼ŒReact ä¼šæ ¹æ®äº‹ä»¶çš„ç›®æ ‡ï¼ˆ`event.target`ï¼‰æ‰¾åˆ°å¯¹åº”çš„ç»„ä»¶ï¼Œå¹¶è°ƒç”¨ç›¸åº”çš„äº‹ä»¶å¤„ç†å‡½æ•°ã€‚

- **ä¼˜ç‚¹**ï¼š
  - å‡å°‘å†…å­˜æ¶ˆè€—ï¼šä¸éœ€è¦ä¸ºæ¯ä¸ª DOM å…ƒç´ ç»‘å®šäº‹ä»¶ã€‚
  - åŠ¨æ€ç»‘å®šï¼šå³ä½¿ç»„ä»¶åŠ¨æ€æ·»åŠ æˆ–åˆ é™¤ï¼Œä¹Ÿä¸éœ€è¦æ‰‹åŠ¨ç»‘å®šæˆ–è§£ç»‘äº‹ä»¶ã€‚

---

3. **äº‹ä»¶ç»‘å®š**
åœ¨ React ä¸­ï¼Œäº‹ä»¶ç»‘å®šæ˜¯é€šè¿‡ JSX çš„å±æ€§ï¼ˆå¦‚ `onClick`ã€`onChange`ï¼‰æ¥å®ç°çš„ã€‚React ä¼šè‡ªåŠ¨å°†è¿™äº›äº‹ä»¶ç»‘å®šåˆ°æ ¹èŠ‚ç‚¹ï¼Œå¹¶åœ¨äº‹ä»¶è§¦å‘æ—¶è°ƒç”¨ç›¸åº”çš„äº‹ä»¶å¤„ç†å‡½æ•°ã€‚

**ç¤ºä¾‹**ï¼š
```jsx
function MyComponent() {
  const handleClick = () => {
    console.log("Button clicked!");
  };

  return <button onClick={handleClick}>Click me</button>;
}
```

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ`onClick` æ˜¯ä¸€ä¸ªåˆæˆäº‹ä»¶ï¼ŒReact ä¼šå°†å…¶ç»‘å®šåˆ°æ ¹èŠ‚ç‚¹ï¼Œå¹¶åœ¨ç‚¹å‡»æŒ‰é’®æ—¶è°ƒç”¨ `handleClick` å‡½æ•°ã€‚

---

4. **äº‹ä»¶æ± åŒ–ï¼ˆEvent Poolingï¼‰**
React çš„åˆæˆäº‹ä»¶æ˜¯æ± åŒ–çš„ï¼Œå³äº‹ä»¶å¯¹è±¡ä¼šè¢«å¤ç”¨ã€‚äº‹ä»¶å›è°ƒæ‰§è¡Œå®Œæ¯•åï¼Œäº‹ä»¶å¯¹è±¡çš„å±æ€§ä¼šè¢«æ¸…ç©ºï¼Œä»¥å‡å°‘å†…å­˜åˆ†é…å’Œåƒåœ¾å›æ”¶çš„å¼€é”€ã€‚

- **æ³¨æ„äº‹é¡¹**ï¼š
  - å¦‚æœéœ€è¦å¼‚æ­¥è®¿é—®äº‹ä»¶å¯¹è±¡ï¼ˆå¦‚åœ¨ `setTimeout` æˆ– `Promise` ä¸­ï¼‰ï¼Œéœ€è¦è°ƒç”¨ `event.persist()` æ¥ä»æ± ä¸­ç§»é™¤äº‹ä»¶å¯¹è±¡ï¼Œå¦åˆ™äº‹ä»¶å¯¹è±¡çš„å±æ€§ä¼šè¢«æ¸…ç©ºã€‚

**ç¤ºä¾‹**ï¼š
```jsx
function MyComponent() {
  const handleClick = (event) => {
    event.persist(); // ä»æ± ä¸­ç§»é™¤äº‹ä»¶å¯¹è±¡
    setTimeout(() => {
      console.log(event.target); // å¯ä»¥æ­£å¸¸è®¿é—®äº‹ä»¶å¯¹è±¡
    }, 100);
  };

  return <button onClick={handleClick}>Click me</button>;
}
```

---

5. **äº‹ä»¶ä¼ æ’­**
React çš„äº‹ä»¶ä¼ æ’­æœºåˆ¶ä¸åŸç”Ÿ DOM äº‹ä»¶ç±»ä¼¼ï¼Œåˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š
1. **æ•è·é˜¶æ®µ**ï¼šä»æ ¹èŠ‚ç‚¹å‘ä¸‹ä¼ æ’­åˆ°ç›®æ ‡èŠ‚ç‚¹ã€‚
2. **ç›®æ ‡é˜¶æ®µ**ï¼šäº‹ä»¶åˆ°è¾¾ç›®æ ‡èŠ‚ç‚¹ã€‚
3. **å†’æ³¡é˜¶æ®µ**ï¼šä»ç›®æ ‡èŠ‚ç‚¹å‘ä¸Šä¼ æ’­åˆ°æ ¹èŠ‚ç‚¹ã€‚

åœ¨ React ä¸­ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°é»˜è®¤åœ¨å†’æ³¡é˜¶æ®µè§¦å‘ã€‚å¦‚æœéœ€è¦ç›‘å¬æ•è·é˜¶æ®µçš„äº‹ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ `onClickCapture` è¿™æ ·çš„å±æ€§ã€‚

**ç¤ºä¾‹**ï¼š
```jsx
function MyComponent() {
  const handleClick = () => {
    console.log("Bubbling phase");
  };

  const handleClickCapture = () => {
    console.log("Capturing phase");
  };

  return (
    <div onClickCapture={handleClickCapture} onClick={handleClick}>
      <button>Click me</button>
    </div>
  );
}
```

---

6. **ä¸åŸç”Ÿäº‹ä»¶çš„å¯¹æ¯”**
| ç‰¹æ€§                | åŸç”Ÿ DOM äº‹ä»¶                  | React åˆæˆäº‹ä»¶                |
|---------------------|-------------------------------|-------------------------------|
| äº‹ä»¶ç»‘å®š            | ç›´æ¥ç»‘å®šåˆ° DOM å…ƒç´             | ç»‘å®šåˆ°æ ¹èŠ‚ç‚¹ï¼Œäº‹ä»¶å§”æ‰˜         |
| äº‹ä»¶å¯¹è±¡            | åŸç”Ÿ `Event` å¯¹è±¡              | åˆæˆäº‹ä»¶å¯¹è±¡ï¼ˆ`SyntheticEvent`ï¼‰|
| è·¨æµè§ˆå™¨å…¼å®¹æ€§      | éœ€è¦æ‰‹åŠ¨å¤„ç†                   | è‡ªåŠ¨å¤„ç†                       |
| äº‹ä»¶æ± åŒ–            | æ—                             | æœ‰                            |
| äº‹ä»¶ä¼ æ’­            | æ”¯æŒæ•è·å’Œå†’æ³¡                 | æ”¯æŒæ•è·å’Œå†’æ³¡                 |

---

7. **React 17 ä¸­çš„äº‹ä»¶å§”æ‰˜å˜åŒ–**
åœ¨ React 17 ä¹‹å‰ï¼Œåˆæˆäº‹ä»¶æ˜¯ç»‘å®šåˆ° `document` ä¸Šçš„ã€‚ä» React 17 å¼€å§‹ï¼Œåˆæˆäº‹ä»¶æ”¹ä¸ºç»‘å®šåˆ° `ReactDOM.render` çš„æ ¹å®¹å™¨ä¸Šã€‚è¿™ä¸€å˜åŒ–ä½¿å¾— React åº”ç”¨å¯ä»¥æ›´å¥½åœ°ä¸å…¶ä»–é React ä»£ç å…±å­˜ã€‚

---

8. **æ€»ç»“**
- React çš„äº‹ä»¶æœºåˆ¶æ˜¯åŸºäº**åˆæˆäº‹ä»¶**çš„ï¼Œæä¾›äº†è·¨æµè§ˆå™¨å…¼å®¹æ€§å’Œé«˜æ•ˆçš„äº‹ä»¶å¤„ç†ã€‚
- äº‹ä»¶é€šè¿‡**äº‹ä»¶å§”æ‰˜**ç»‘å®šåˆ°æ ¹èŠ‚ç‚¹ï¼Œå‡å°‘äº†å†…å­˜æ¶ˆè€—å’ŒåŠ¨æ€ç»‘å®šçš„å¤æ‚æ€§ã€‚
- åˆæˆäº‹ä»¶æ˜¯æ± åŒ–çš„ï¼Œäº‹ä»¶å¯¹è±¡ä¼šè¢«å¤ç”¨ï¼Œéœ€è¦æ³¨æ„å¼‚æ­¥è®¿é—®æ—¶è°ƒç”¨ `event.persist()`ã€‚
- React 17 å°†äº‹ä»¶å§”æ‰˜ä» `document` æ”¹ä¸ºæ ¹å®¹å™¨ï¼Œè¿›ä¸€æ­¥ä¼˜åŒ–äº†äº‹ä»¶æœºåˆ¶ã€‚

å¸Œæœ›è¿™ä¸ªè§£é‡Šèƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ React çš„äº‹ä»¶æœºåˆ¶ï¼å¦‚æœè¿˜æœ‰ç–‘é—®ï¼Œæ¬¢è¿ç»§ç»­æé—®ï¼


## è¯´è¯´å¯¹React Hooksçš„ç†è§£ï¼Ÿè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ

è§£å†³å‡½æ•°ç»„ä»¶åŸä¸ºæ— çŠ¶æ€ç»„ä»¶ï¼Œæˆä¸ºå†…éƒ¨å¯ä»¥è¿›è¡Œç»´æŠ¤è‡ªèº«çŠ¶æ€

- useState
    ```javascript
      const [state, setState] = useState(initialState)
    ```
    æ³¨æ„ï¼š
    1. initialState: ä½ å¸Œæœ› state åˆå§‹åŒ–çš„å€¼ã€‚å®ƒå¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å€¼ï¼Œä½†å¯¹äºå‡½æ•°æœ‰ç‰¹æ®Šçš„è¡Œä¸ºã€‚åœ¨åˆå§‹æ¸²æŸ“åï¼Œæ­¤å‚æ•°å°†è¢«å¿½ç•¥
    2. ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ŒReactå°†ä¸¤æ¬¡è°ƒç”¨åˆå§‹åŒ–å‡½æ•°ï¼Œ
    3. setå‡½æ•°ä»…æ›´æ–°ä¸‹ä¸€æ¬¡çš„æ¸²æŸ“çš„çŠ¶æ€å˜é‡ã€‚å¦‚æœåœ¨è°ƒç”¨setå‡½æ•°åè¯»å–çŠ¶æ€å˜é‡ã€‚å¦‚æœåœ¨è°ƒç”¨ set å‡½æ•°åè¯»å–çŠ¶æ€å˜é‡ï¼Œåˆ™ ä»ä¼šå¾—åˆ°åœ¨è°ƒç”¨ä¹‹å‰æ˜¾ç¤ºåœ¨å±å¹•ä¸Šçš„æ—§å€¼ã€‚å¦‚æœä½ æä¾›çš„æ–°å€¼ä¸å½“å‰ state ç›¸åŒï¼ˆç”± Object.is æ¯”è¾ƒç¡®å®šï¼‰ï¼ŒReact å°† è·³è¿‡é‡æ–°æ¸²æŸ“è¯¥ç»„ä»¶åŠå…¶å­ç»„ä»¶ã€‚React ä¼š æ‰¹é‡å¤„ç†çŠ¶æ€æ›´æ–°ã€‚å®ƒä¼šåœ¨æ‰€æœ‰ äº‹ä»¶å¤„ç†å‡½æ•°è¿è¡Œ å¹¶è°ƒç”¨å…¶ set å‡½æ•°åæ›´æ–°å±å¹•ã€‚è¿™å¯ä»¥é˜²æ­¢åœ¨å•ä¸ªäº‹ä»¶æœŸé—´å¤šæ¬¡é‡æ–°æ¸²æŸ“ã€‚
    4. flushSync å…è®¸ä½ å¼ºåˆ¶ React åœ¨æä¾›çš„å›è°ƒå‡½æ•°å†…åŒæ­¥åˆ·æ–°ä»»ä½•æ›´æ–°ï¼Œè¿™å°†ç¡®ä¿ DOM ç«‹å³æ›´æ–°
  React ä¼šå­˜å‚¨æ–°çŠ¶æ€ï¼Œä½¿ç”¨æ–°å€¼é‡æ–°æ¸²æŸ“ç»„ä»¶ï¼Œå¹¶æ›´æ–° UI
    è°ƒç”¨ set å‡½æ•° ä¸ä¼š æ”¹å˜å·²ç»æ‰§è¡Œçš„ä»£ç ä¸­å½“å‰çš„ state ï¼ˆæœ‰ä¸€ç§å¼‚æ­¥çš„æ„Ÿè§‰ï¼‰
      - **è§£å†³åŠæ³•**ï¼š ä½ å¯ä»¥å‘ setå‡½æ•°ä¸­ä¼ é€’ä¸€ä¸ª æ›´æ–°å‡½æ•°ï¼Œè€Œä¸æ˜¯ä¸‹ä¸€ä¸ªçŠ¶æ€
      
  æ›´æ–°çŠ¶æ€ä¸­çš„å¯¹è±¡å’Œæ•°ç»„
    å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡æ¥æ›¿æ¢æ•´ä¸ªå¯¹è±¡

- useRef
    å¼•å…¥ä¸€ä¸ªä¸éœ€è¦æ¸²æŸ“çš„å€¼
    ```javascript
    const ref = useRef(initialValue)
    ```
    initialValueï¼šref å¯¹è±¡çš„ current å±æ€§çš„åˆå§‹å€¼ã€‚å¯ä»¥æ˜¯ä»»æ„ç±»å‹çš„å€¼ã€‚è¿™ä¸ªå‚æ•°åœ¨é¦–æ¬¡æ¸²æŸ“åè¢«å¿½ç•¥ã€‚

    >useRefè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œref.currentä¸ºinitialValue.
    >æ”¹å˜ ref.current å±æ€§æ—¶ï¼ŒReact ä¸ä¼šé‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚
    >React ä¸çŸ¥é“å®ƒä½•æ—¶ä¼šå‘ç”Ÿæ”¹å˜ï¼Œå› ä¸º ref æ˜¯ä¸€ä¸ªæ™®é€šçš„ JavaScript å¯¹è±¡ã€‚

    1. ä½¿ç”¨ useRef å£°æ˜ refã€‚ä½ å¯ä»¥åœ¨å…¶ä¸­ä¿å­˜ä»»ä½•å€¼ï¼Œä½†æœ€å¸¸ç”¨äºä¿å­˜ DOM èŠ‚ç‚¹ã€‚
    2. ä½¿ç”¨ç”¨ ref å¼•ç”¨ä¸€ä¸ªå€¼
     - å¯ä»¥åœ¨é‡æ–°æ¸²æŸ“ä¹‹é—´ å­˜å‚¨ä¿¡æ¯
     - å¯ä»¥åœ¨é‡æ–°æ¸²æŸ“ä¹‹é—´ å­˜å‚¨ä¿¡æ¯
     - 
    æ³¨æ„ï¼šæ”¹å˜refä¸ä¼šè§¦å‘æ¸²æŸ“ï¼Œ
- useEffect
- useContext
    useContext, å¯ä»¥è®©ä½ è¯»å–å’Œè®¢é˜…ç»„ä»¶ä¸­çš„context
    ```javascript
      useContext(SomeContext)
    ```
    SomeContextï¼šå…ˆå‰ç”¨ createContext åˆ›å»ºçš„ contextã€‚context æœ¬èº«ä¸åŒ…å«ä¿¡æ¯ï¼Œå®ƒåªä»£è¡¨ä½ å¯ä»¥æä¾›æˆ–ä»ç»„ä»¶ä¸­è¯»å–çš„ä¿¡æ¯ç±»å‹ã€‚
    **ç”¨æ³•ï¼š**
     - å‘ç»„ä»¶æ·±å¤„ä¼ é€’æ•°æ®
     - é€šè¿‡contextæ›´æ–°ä¼ é€’çš„æ•°æ®
    
- useCallback
    
    
- useReducer
  åœ¨ç»„ä»¶çš„é¡¶å±‚ä½œç”¨åŸŸè°ƒç”¨ useReducer ä»¥åˆ›å»ºä¸€ä¸ªç”¨äºç®¡ç†çŠ¶æ€çš„ reducerã€‚

## state å’Œ props æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
- state
    stateæ˜¯ç”¨æ¥ä¿å­˜ç»„ä»¶çŠ¶æ€ã€æ§åˆ¶ä»¥åŠä¿®æ”¹è‡ªå·±çŠ¶æ€ã€‚
    å¤–éƒ¨ä¸å¯è®¿é—®ï¼Œå¯ä»¥è¯´æ˜¯ç»„ä»¶ç§æœ‰å±æ€§
- props
    æ˜¯ä¼ é€’ç»™ç»„ä»¶çš„ï¼ˆç±»ä¼¼äºå‡½æ•°çš„ä¼ å‚ï¼‰ï¼Œåªè¯»ä¸å¯æ”¹
## ç»„ä»¶ä¸­å¦‚ä½•éªŒè¯Props
Reactä¸ºæˆ‘ä»¬æä¾›äº†PropTypesä»¥ä¾›éªŒè¯ä½¿ç”¨ã€‚å¦‚æœä½¿ç”¨typescripté‚£ä¹ˆå°±å¯ä»¥ç›´æ¥ç”¨æ¥å£æ¥å®šä¹‰ã€‚
```javascript
import React from "react";
import propTypes from 'prop-types'
class State extends React.Component {
    constructor(props){
        super(props)
        this.state = {
            
        }
    }
    render() {
        return (
            <div>
                {this.props.name}
            </div>
        )
    }
}
State.propTypes = {
    name: propTypes.string
}
export default State;
```
# super() å’Œ super(props) æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
super()å’Œsuper(props)éƒ½æ˜¯è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°çš„è¯­å¥ã€‚
- super()
    ä¼šè°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°å¹¶å°†thisç»‘å®šåˆ°å­ç±»çš„å®ä¾‹ã€‚å¦‚æœå­ç±»çš„æ„é€ å‡½æ•°ä¸­
    æ²¡æœ‰ä½¿ç”¨this,åˆ™å¯ä»¥çœç•¥superè°ƒç”¨
- super(props)
    åˆ™æ˜¯åœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¸­è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œå¹¶å°†propså¯¹è±¡å‡ºä¼ é€’ç»™çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚
    propså¯¹è±¡ä¼ é€’ç»™çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œä»¥ä¾¿åœ¨ç»„ä»¶ä¸­ä½¿ç”¨this.propsè®¿é—®å®ƒã€‚
## super
åœ¨JavaScriptä¸­ï¼Œsuperæ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œç”¨äºè°ƒç”¨çˆ¶ç±»ä¸­çš„æ„é€ å‡½æ•°å’Œæ–¹æ³•ã€‚
- å½“å­ç±»ç»§æ‰¿çˆ¶ç±»æ—¶ï¼Œå­ç±»å¿…é¡»ä½¿ç”¨ super è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œä»¥ä¾¿å­ç±»å¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•ã€‚åœ¨ constructor æ–¹æ³•ä¸­ï¼Œä½¿ç”¨ super è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ this å…³é”®å­—è®¿é—®å­ç±»çš„å±æ€§å’Œæ–¹æ³•
# è¯´è¯´ Reactä¸­çš„setStateæ‰§è¡Œæœºåˆ¶
ç±»å¼ç»„ä»¶ä¸­æœ‰setStateæœºåˆ¶
- ç»„ä»¶ä¸­å¤šæ¬¡è°ƒç”¨setState()ï¼Œä¼šè¿›è¡Œåˆå¹¶ï¼Œç»„ä»¶åªæ‰§è¡Œä¸€æ¬¡æ›´æ–°æ“ä½œ
- æµç¨‹
    1.å°†setStateä¼ å…¥çš„partialStateå‚æ•°å­˜å‚¨åœ¨å½“å‰ç»„ä»¶å®ä¾‹çš„stateæš‚å­˜é˜Ÿåˆ—ä¸­ã€‚
    2.åˆ¤æ–­å½“å‰Reactæ˜¯å¦å¤„äºæ‰¹é‡æ›´æ–°çŠ¶æ€ï¼Œå¦‚æœæ˜¯ï¼Œå°†å½“å‰ç»„ä»¶åŠ å…¥å¾…æ›´æ–°çš„ç»„ä»¶é˜Ÿåˆ—ä¸­ã€‚
    3.å¦‚æœæœªå¤„äºæ‰¹é‡æ›´æ–°çŠ¶æ€ï¼Œå°†æ‰¹é‡æ›´æ–°çŠ¶æ€æ ‡è¯†è®¾ç½®ä¸ºtrueï¼Œç”¨äº‹åŠ¡å†æ¬¡è°ƒç”¨å‰ä¸€æ­¥æ–¹æ³•ï¼Œä¿è¯å½“å‰ç»„ä»¶åŠ å…¥åˆ°äº†å¾…æ›´æ–°ç»„ä»¶é˜Ÿåˆ—ä¸­ã€‚
    4.è°ƒç”¨äº‹åŠ¡çš„waperæ–¹æ³•ï¼Œéå†å¾…æ›´æ–°ç»„ä»¶é˜Ÿåˆ—ä¾æ¬¡æ‰§è¡Œæ›´æ–°ã€‚
    5.æ‰§è¡Œç”Ÿå‘½å‘¨æœŸcomponentWillReceivePropsã€‚
    6.å°†ç»„ä»¶çš„stateæš‚å­˜é˜Ÿåˆ—ä¸­çš„stateè¿›è¡Œåˆå¹¶ï¼Œè·å¾—æœ€ç»ˆè¦æ›´æ–°çš„stateå¯¹è±¡ï¼Œå¹¶å°†é˜Ÿåˆ—ç½®ä¸ºç©ºã€‚
    7.æ‰§è¡Œç”Ÿå‘½å‘¨æœŸcomponentShouldUpdateï¼Œæ ¹æ®è¿”å›å€¼åˆ¤æ–­æ˜¯å¦è¦ç»§ç»­æ›´æ–°ã€‚
    8.æ‰§è¡Œç”Ÿå‘½å‘¨æœŸcomponentWillUpdateã€‚
    9.æ‰§è¡ŒçœŸæ­£çš„æ›´æ–°ï¼Œrenderã€‚
    10.æ‰§è¡Œç”Ÿå‘½å‘¨æœŸcomponentDidUpdate
## setStateæ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ï¼Ÿ

åœ¨ React ä¸­ï¼Œ`setState` çš„è¡Œä¸ºæ—¢å¯ä»¥æ˜¯**å¼‚æ­¥**çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯**åŒæ­¥**çš„ï¼Œå…·ä½“å–å†³äºè°ƒç”¨å®ƒçš„ä¸Šä¸‹æ–‡ã€‚ä»¥ä¸‹æ˜¯å¯¹ `setState` è¡Œä¸ºçš„è¯¦ç»†è§£é‡Šï¼š

---

1. **`setState` çš„å¼‚æ­¥è¡Œä¸º**
åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œ`setState` æ˜¯**å¼‚æ­¥**çš„ã€‚React ä¼šå°†å¤šä¸ª `setState` è°ƒç”¨åˆå¹¶ï¼ˆæ‰¹å¤„ç†ï¼‰ï¼Œç„¶åä¸€æ¬¡æ€§æ›´æ–°ç»„ä»¶çŠ¶æ€ï¼Œä»¥æé«˜æ€§èƒ½ã€‚

**å¼‚æ­¥çš„åŸå› **ï¼š
- **æ€§èƒ½ä¼˜åŒ–**ï¼šReact ä¼šå°†å¤šä¸ªçŠ¶æ€æ›´æ–°åˆå¹¶ï¼Œå‡å°‘ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ã€‚
- **ä¸€è‡´æ€§**ï¼šç¡®ä¿åœ¨äº‹ä»¶å¤„ç†å‡½æ•°æˆ–ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­ï¼ŒçŠ¶æ€æ›´æ–°æ˜¯æ‰¹å¤„ç†çš„ï¼Œé¿å…ä¸­é—´çŠ¶æ€å¯¼è‡´çš„ UI ä¸ä¸€è‡´ã€‚

**ç¤ºä¾‹**ï¼š
```javascript
class MyComponent extends React.Component {
  state = {
    count: 0,
  };

  handleClick = () => {
    this.setState({ count: this.state.count + 1 });
    console.log(this.state.count); // è¾“å‡º 0ï¼Œå› ä¸º setState æ˜¯å¼‚æ­¥çš„
  };

  render() {
    return (
      <div>
        <p>{this.state.count}</p>
        <button onClick={this.handleClick}>Increment</button>
      </div>
    );
  }
}
```

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ`console.log` è¾“å‡ºçš„ä»ç„¶æ˜¯æ—§çš„çŠ¶æ€å€¼ï¼Œå› ä¸º `setState` æ˜¯å¼‚æ­¥çš„ï¼ŒçŠ¶æ€æ›´æ–°è¿˜æ²¡æœ‰å®Œæˆã€‚

---

2. **`setState` çš„åŒæ­¥è¡Œä¸º**
åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œ`setState` ä¼šè¡¨ç°ä¸º**åŒæ­¥**æ›´æ–°ã€‚ä¾‹å¦‚ï¼š
- åœ¨ **`setTimeout`ã€`Promise`ã€åŸç”Ÿäº‹ä»¶** ç­‰å¼‚æ­¥ä»£ç ä¸­è°ƒç”¨ `setState` æ—¶ï¼ŒReact ä¸ä¼šè¿›è¡Œæ‰¹å¤„ç†ï¼ŒçŠ¶æ€ä¼šç«‹å³æ›´æ–°ã€‚

**ç¤ºä¾‹**ï¼š
```javascript
class MyComponent extends React.Component {
  state = {
    count: 0,
  };

  handleClick = () => {
    setTimeout(() => {
      this.setState({ count: this.state.count + 1 });
      console.log(this.state.count); // è¾“å‡º 1ï¼Œå› ä¸º setState æ˜¯åŒæ­¥çš„
    }, 0);
  };

  render() {
    return (
      <div>
        <p>{this.state.count}</p>
        <button onClick={this.handleClick}>Increment</button>
      </div>
    );
  }
}
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`setState` åœ¨ `setTimeout` ä¸­è°ƒç”¨ï¼Œå› æ­¤å®ƒæ˜¯åŒæ­¥çš„ï¼Œ`console.log` ä¼šè¾“å‡ºæ›´æ–°åçš„çŠ¶æ€å€¼ã€‚

---

3. **å¦‚ä½•è·å–æ›´æ–°åçš„çŠ¶æ€ï¼Ÿ**
ç”±äº `setState` æ˜¯å¼‚æ­¥çš„ï¼Œå¦‚æœä½ éœ€è¦åœ¨çŠ¶æ€æ›´æ–°åæ‰§è¡ŒæŸäº›æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨ `setState` çš„ç¬¬äºŒä¸ªå‚æ•°ï¼ˆå›è°ƒå‡½æ•°ï¼‰ã€‚

**ç¤ºä¾‹**ï¼š
```javascript
this.setState({ count: this.state.count + 1 }, () => {
  console.log(this.state.count); // è¾“å‡ºæ›´æ–°åçš„çŠ¶æ€å€¼
});
```

---

4. **å‡½æ•°å¼ `setState`**
`setState` è¿˜å¯ä»¥æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¼šæ¥æ”¶å½“å‰çŠ¶æ€å’Œ `props` ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„çŠ¶æ€å¯¹è±¡ã€‚è¿™ç§æ–¹å¼å¯ä»¥é¿å…ç›´æ¥ä¾èµ– `this.state`ï¼Œå°¤å…¶æ˜¯åœ¨å¤šæ¬¡è°ƒç”¨ `setState` æ—¶ã€‚

**ç¤ºä¾‹**ï¼š
```javascript
this.setState((prevState, props) => {
  return { count: prevState.count + 1 };
});
```

---

5. **React 18 ä¸­çš„è‡ªåŠ¨æ‰¹å¤„ç†**
åœ¨ React 18 ä¸­ï¼ŒReact å¼•å…¥äº†**è‡ªåŠ¨æ‰¹å¤„ç†**æœºåˆ¶ï¼Œå³ä½¿åœ¨ `Promise`ã€`setTimeout` ç­‰å¼‚æ­¥ä»£ç ä¸­ï¼Œ`setState` ä¹Ÿä¼šè¢«æ‰¹å¤„ç†ã€‚å¦‚æœä½ å¸Œæœ›åœ¨æŸäº›æƒ…å†µä¸‹ç¦ç”¨æ‰¹å¤„ç†ï¼Œå¯ä»¥ä½¿ç”¨ `ReactDOM.flushSync`ã€‚

**ç¤ºä¾‹**ï¼š
```javascript
import { flushSync } from 'react-dom';

flushSync(() => {
  this.setState({ count: this.state.count + 1 });
});
console.log(this.state.count); // è¾“å‡ºæ›´æ–°åçš„çŠ¶æ€å€¼
```

---

6. **æ€»ç»“**
- **å¼‚æ­¥**ï¼šåœ¨ React äº‹ä»¶å¤„ç†å‡½æ•°å’Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­ï¼Œ`setState` æ˜¯å¼‚æ­¥çš„ï¼ŒReact ä¼šè¿›è¡Œæ‰¹å¤„ç†ã€‚
- **åŒæ­¥**ï¼šåœ¨ `setTimeout`ã€`Promise`ã€åŸç”Ÿäº‹ä»¶ç­‰å¼‚æ­¥ä»£ç ä¸­ï¼Œ`setState` æ˜¯åŒæ­¥çš„ã€‚
- **è·å–æ›´æ–°åçš„çŠ¶æ€**ï¼šä½¿ç”¨ `setState` çš„ç¬¬äºŒä¸ªå‚æ•°ï¼ˆå›è°ƒå‡½æ•°ï¼‰æˆ–å‡½æ•°å¼ `setState`ã€‚
- **React 18**ï¼šå¼•å…¥äº†è‡ªåŠ¨æ‰¹å¤„ç†æœºåˆ¶ï¼Œè¿›ä¸€æ­¥ä¼˜åŒ–äº†çŠ¶æ€æ›´æ–°çš„è¡Œä¸ºã€‚

setStateä¸€å®šä¼šåˆå¹¶å—

å…¶å®ä¸ç„¶ï¼Œå®Œå…¨æ›¿æ¢çš„æ—¶å€™ï¼Œå°±ä¸ä¼šåˆå¹¶ã€‚åˆå¹¶åªæ˜¯ä¸€ç§ä¼˜åŒ–ç­–ç•¥ã€‚
## [React é«˜é˜¶ç»„ä»¶](./é«˜é˜¶ç»„ä»¶.md)


## React Hooksçš„ä½¿ç”¨é™åˆ¶æœ‰å“ªäº›ï¼Ÿ


## React fiberæ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆç”¨ï¼Ÿ

Fiberä¼šå°†ä¸€ä¸ªé¢å¤§çš„æ›´æ–°ä»»åŠ¡æ‹†è§£ä¸ºè®¸å¤šä¸ªå°ä»»åŠ¡

Fiberæ¶æ„çš„é‡è¦ç‰¹å¾å°±æ˜¯å¯ä»¥è¢«æ‰“æ–­çš„å¼‚æ­¥æ¸²æŸ“æ–¹å¼

ç”Ÿå‘½å‘¨æœŸå·¥ä½œæµ

**renderé˜¶æ®µåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å…è®¸è¢«æ‰“æ–­ï¼Œè€Œcommité˜¶æ®µæ€»æ˜¯åŒæ­¥æ‰§è¡Œçš„**



## React18å’Œä¹‹å‰ç‰ˆæœ¬çš„åŒºåˆ«


## ä¸ºä»€ä¹ˆè¯´Reactä¸­çš„propsæ˜¯åªè¯»çš„ï¼Ÿ

Reactä¸­propsæ˜¯å•é¡¹æ•°æ®æµï¼Œçˆ¶ç»„ä»¶ä¼ è¿›å­ç»„ä»¶çš„æ•°æ®propsæ”¹å˜åï¼Œå­ç»„ä»¶ä¹Ÿä¼šè¿›è¡Œæ”¹å˜ï¼Œä½†æ˜¯å­ç»„ä»¶ä¸å¯æ›´æ”¹propsçš„å€¼ï¼Œè®©å˜åŒ–å˜å¾—éš¾ä»¥é¢„æµ‹

## React Fiberå®ƒçš„ç›®çš„æ˜¯è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ

GUIçº¿ç¨‹å’ŒJSçº¿ç¨‹æ˜¯äº’æ–¥çš„ï¼Œä¼šå¯¼è‡´
- GUIè´Ÿè´£ç»˜åˆ¶
- JSæ‰§è¡Œè„šæœ¬


## Reactç»„ä»¶åŒ–



## Redux

Reduxæ˜¯è´Ÿè´£çŠ¶æ€ç®¡ç†

- å•ä¸€æ•°æ®æº
- state æ˜¯åªè¯»çš„
- ä½¿ç”¨çº¯å‡½æ•°æ¥æ‰§è¡Œä¿®æ”¹

### å¦‚ä½•ä½¿ç”¨

- åˆ›å»ºä¸€ä¸ªstore

```javascript
  import { createStore } from 'redux' // å¼•å…¥ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„æ–¹æ³•
  const store = createStore() // åˆ›å»ºæ•°æ®çš„å…¬å…±å­˜å‚¨åŒºåŸŸï¼ˆç®¡ç†å‘˜ï¼‰
```

- state
    ```javascript
      // è®¾ç½®é»˜è®¤å€¼
      const initialState = {
        counter: 0
      }

      const reducer = (state = initialState, action) => {  // ä¹Ÿå°±æ˜¯reducer
      }
    ```
- action
    æ”¹å˜å†…éƒ¨çŠ¶æ€çš„å”¯ä¸€æ–¹æ³•æ˜¯ dispatch ä¸€ä¸ª actionã€‚
    è¿™äº› action å¯ä»¥è¢«åºåˆ—åŒ–ã€è®°å½•æˆ–å­˜å‚¨ï¼Œç„¶åå†é‡æ”¾ã€‚
    ç”¨æˆ·æ´¾å‘action, dispatchç»™store
      - type ä»£è¡¨éœ€è¦è¢«æ‰§è¡Œçš„ action ç±»åˆ«

    ```javascript
      store.dispatch({
        type: "ADD_NUMBER",
        number: 5
      })
    ```
    **å¼‚æ­¥action**

- reducer
    æ¥å—state, action, å¤„ç†ç›¸å…³æ•°æ®ï¼Œè¿”å›state
    reduceræ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œä¸éœ€è¦ç›´æ¥ä¿®æ”¹state
    ```javascript
      function counterReducer(state = { value: 0 }, action) {
        switch (action.type) {
          case "counter/incremented":
            return { value: state.value + 1 };
          case "counter/decremented":
            return { value: state.value - 1 };
          default:
            return state;
        }
      }
    ```
- ç›‘å¬stateçš„å˜åŒ–
  ```javascript
  store.subscribe(() => {
    console.log(store.getState());
  })
  ```
Redux Toolkitæ˜¯æ¨èçš„ç¼–å†™Reduxé€»è¾‘çš„æ–¹æ³•

- é…ç½®redux store
- åˆ›å»ºreducerå‡½æ•°å¹¶ä½¿ç”¨ä¸å¯æ›´æ”¹æ›´æ–°é€»è¾‘
- ä¸€æ¬¡æ€§åˆ›å»ºçŠ¶æ€çš„æŸä¸ªç‰‡æ®µslice


## React è·¯ç”±

## Reactæ€§èƒ½ä¼˜åŒ–

