<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.20" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>Vue3é¢è¯•é¢˜ | å‡çº§æ‰“æ€ªğŸ¯</title><meta name="description" content="å‡èŒåŠ è–ª">
    <link rel="preload" href="/upKnowledge/assets/style-C6ZxLeSM.css" as="style"><link rel="stylesheet" href="/upKnowledge/assets/style-C6ZxLeSM.css">
    <link rel="modulepreload" href="/upKnowledge/assets/app-BeRZjn83.js"><link rel="modulepreload" href="/upKnowledge/assets/index.html-BaO2oa_F.js">
    <link rel="prefetch" href="/upKnowledge/assets/index.html-BUO849nb.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-DtD2Cgnw.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/è‡ªæµ‹ç³»åˆ—.html-CsWwKthb.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/åŠ è½½å›¾ç‰‡ä¼˜åŒ–ç­–ç•¥.html-j3e0dSMo.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/routed.html-CwLNm3vA.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-BQSnY5X-.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/sasså’Œless.html-Dj9SmGJj.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/router.html-Da8DWFQ_.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-WQBnSRfg.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-D1-dGZsK.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/htmlç›¸å…³.html-BEQ3kBas.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-B8yiQSS9.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-CjIjIkgl.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-CfyhS2_Z.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-BDmogX-I.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-aSzicbCP.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-DsjCJlID.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/vue.html-CL8g5OxA.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-Cg-Tt5nJ.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/ç™»å½•çš„å®ç°.html-DPsBJpQI.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-CwJ02vjz.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-KsH-R5MJ.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-b3zLjt_1.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-BJVd8SVs.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-FuTlWXeg.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/æµè§ˆå™¨ç¼“å­˜.html-7GXt5hcL.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/å›¾æ ‡.html-BdgWOr18.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-CieGgB2F.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-DUZEGh0M.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/useContext.html-BajEpIof.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/useReducer.html-VOx-Atin.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/Button.html-1virMWxJ.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-p_Fcuwqe.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/routed.html-CUw3iGbE.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/style-components.html-D8Otqp2_.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/Gastby.html-COPVxsIg.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/GraphQL.html-CTdQ_Pa-.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/ImagesAndMedia.html-Ds2XLBH-.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/plugin.html-ZoRWLNxb.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/QueryingData.html-D0yq9p35.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/route.html-MmbRNpMn.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/Router_20230802.html-CqDEiAcg.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/route.html-BdaiHhcO.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/å¿«é€ŸæŒæ¡åŸºç¡€.html-CRGSzyB_.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-CkKBMVDs.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/Memo.html-DDpG-iHb.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/PureComponent.html-CWgkWaBa.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/useEffect.html-Td9PgvcV.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/å†…ç½®ç±»å‹.html-DBDNvtgi.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-CZ9C5SNa.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/deploy.html-BMntSVyZ.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/route.html-DHC7cEkq.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/å‡†å¤‡å·¥ä½œ.html-CYB7p0Ef.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/AuthorityManagement.html-Cc4Z8xn4.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/route.html-oj-3GfNN.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/three.html-Dnf9vsIB.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-DXf1Nvsr.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/webpackå­¦ä¹ ï¼ˆä¸€ï¼‰åŸºæœ¬é…ç½®.html-BMnO6H0r.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/media.html-DRYpqikg.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/route.html-CuBQOF1r.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/æƒé™.html-mJqUWL9u.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/routed.html-DruWL2Sc.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/history.html-DO60Bntx.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/Rollup.html-naQy2uGl.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/route.html-D-_8mAAZ.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/è¿›é˜¶-æ­å»ºç»„ä»¶åº“.html-Dz1DDgb2.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-DwVoMwio.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/git.html-DjJI3-1m.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-Cx_qKIr3.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-B6rEJgBN.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-BfrmYWSM.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-NdUMjgJ5.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-DRtVAH4r.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-BgJYuOwW.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-BjwIKKCz.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-Ct6G7s6S.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-ToVPtHBy.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-C07gS3St.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-CDCN7wj3.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-CyqSTu6R.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-BXjvO8aS.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-e9c7uhj7.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/built_in_api.html-UbxTOj9f.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/CreatePage.html-Bt2sF_we.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/nodemailer.html-CgsOOK35.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/gatsby-source-filesystem.html-BmPSKQh3.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/i18n.html-B9TIB9gh.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-BVZmyqyZ.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/ReactHooks.html-CO3tevBf.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/unstated-next.html-9AmF_XkM.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/Button.html-BKGsBeDE.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-CYP30QiZ.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/useContext.html-0XYXvkDr.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/useReducer.html-GJsS9EAY.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-DjxYAjAv.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/èµ·æ­¥.html-DUdCIQLc.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/routed.html-bVU2d4K0.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/style-components.html-W2cGs6tI.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/Gastby.html-DbCU_kP_.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/GraphQL.html-vMfaYVjU.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/ImagesAndMedia.html-BlgpamHH.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/plugin.html-Cp5qjg1S.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/QueryingData.html-C2L4Y37X.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/route.html-C-yGCbIB.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/Router_20230802.html-CBr4alMV.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/iframe.html-hloR9kem.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/route.html-DPN4C-fL.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/route.html-e-2nzTIW.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/å¿«é€ŸæŒæ¡åŸºç¡€.html-DcRrc-JC.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-BMjTYCd4.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/Memo.html-oa3pbzLG.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/PureComponent.html-BwRNtbt6.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/useEffect.html-BCoO7CZX.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/å†…ç½®ç±»å‹.html-C5rwhu9U.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-DkVKvzBR.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/deploy.html-DyLsmX4k.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/route.html-46DVqP5i.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/å‡†å¤‡å·¥ä½œ.html--GEeIX2W.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/AuthorityManagement.html-CSfBXr5R.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/route.html-XEHYfocX.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-BUClJV9G.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/webpackå­¦ä¹ ï¼ˆä¸€ï¼‰åŸºæœ¬é…ç½®.html-C2LAyOob.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/media.html-DiSKMjq0.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/route.html-DbDVIHlR.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/æƒé™.html-DD_yrY2J.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/routed.html-B9NX8T3e.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/C__.html-CLFYzWmL.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/history.html-B8kmFG3o.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/Rollup.html-BdOdRS7e.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/route.html-DfDj4tfP.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/è¿›é˜¶-æ­å»ºç»„ä»¶åº“.html-D63F7jB5.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-DkyfcmNM.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-BLV9sX1i.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/PureComponent.html-D680fApL.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/gatsby-source-filesystem.html-C7-RjB1L.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/built_in_api.html-Dygptv1W.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/CreatePage.html-CQ7Y1WPK.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/i18n.html-BiWHQnkY.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/nodemailer.html-Brje8kXL.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/index.html-DQGy0XzX.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/ReactHooks.html-CGK4-cJ1.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/unstated-next.html-c8N5yxa8.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/404.html-Cr0C6VIB.js" as="script"><link rel="prefetch" href="/upKnowledge/assets/setupDevtools-QXEOFQJV-Dradb9qR.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/upKnowledge/"><!----><span class="vp-site-name" aria-hidden="true">å‡çº§æ‰“æ€ªğŸ¯</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="auto-link external-link" href="https://app.postdrop.io/" aria-label="å®ç”¨å·¥å…·é“¾æ¥" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->å®ç”¨å·¥å…·é“¾æ¥<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="WebAPI"><span class="title">WebAPI</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="WebAPI"><span class="title">WebAPI</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://webapis-playground.vercel.app.html" aria-label="https://webapis-playground.vercel.app.html" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->https://webapis-playground.vercel.app.html<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://vue3js.cn/interview/" aria-label="https://vue3js.cn/interview/" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->https://vue3js.cn/interview/<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://www.wangdoc.com/" aria-label="https://www.wangdoc.com/" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->https://www.wangdoc.com/<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="auto-link external-link" href="https://app.postdrop.io/" aria-label="å®ç”¨å·¥å…·é“¾æ¥" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->å®ç”¨å·¥å…·é“¾æ¥<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="WebAPI"><span class="title">WebAPI</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="WebAPI"><span class="title">WebAPI</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://webapis-playground.vercel.app.html" aria-label="https://webapis-playground.vercel.app.html" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->https://webapis-playground.vercel.app.html<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://vue3js.cn/interview/" aria-label="https://vue3js.cn/interview/" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->https://vue3js.cn/interview/<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://www.wangdoc.com/" aria-label="https://www.wangdoc.com/" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->https://www.wangdoc.com/<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">Vue3é¢è¯•é¢˜ <!----></p><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div><h1 id="vue3é¢è¯•é¢˜" tabindex="-1"><a class="header-anchor" href="#vue3é¢è¯•é¢˜"><span>Vue3é¢è¯•é¢˜</span></a></h1><h2 id="ç”Ÿå‘½å‘¨æœŸ" tabindex="-1"><a class="header-anchor" href="#ç”Ÿå‘½å‘¨æœŸ"><span>ç”Ÿå‘½å‘¨æœŸ</span></a></h2><h2 id="ref" tabindex="-1"><a class="header-anchor" href="#ref"><span>ref</span></a></h2><h2 id="reactive" tabindex="-1"><a class="header-anchor" href="#reactive"><span>reactive</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"> <span class="token comment">// --------------- reactive æ¨¡å— --------------- </span></span>
<span class="line">    <span class="token doc-comment comment">/**</span>
<span class="line">     * æ”¶é›†æ‰€æœ‰ä¾èµ–çš„ WeakMap å®ä¾‹ï¼š</span>
<span class="line">     * 1. `key`ï¼šå“åº”æ€§å¯¹è±¡</span>
<span class="line">     * 2. `value`ï¼š`Map` å¯¹è±¡</span>
<span class="line">     * 		1. `key`ï¼šå“åº”æ€§å¯¹è±¡çš„æŒ‡å®šå±æ€§</span>
<span class="line">     * 		2. `value`ï¼šæŒ‡å®šå¯¹è±¡çš„æŒ‡å®šå±æ€§çš„ æ‰§è¡Œå‡½æ•°</span>
<span class="line">     */</span></span>
<span class="line">    <span class="token keyword">const</span> targetMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token doc-comment comment">/**</span>
<span class="line">     * æ”¶é›†ä¾èµ–</span>
<span class="line">     */</span></span>
<span class="line">    <span class="token keyword">function</span> <span class="token function">track</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// å¦‚æœå½“å‰ä¸å­˜åœ¨æ‰§è¡Œå‡½æ•°ï¼Œåˆ™ç›´æ¥ return</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>activeEffect<span class="token punctuation">)</span> <span class="token keyword">return</span></span>
<span class="line">        <span class="token comment">// å°è¯•ä» targetMap ä¸­ï¼Œæ ¹æ® target è·å– map</span></span>
<span class="line">        <span class="token keyword">let</span> depsMap <span class="token operator">=</span> targetMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment">// å¦‚æœè·å–åˆ°çš„ map ä¸å­˜åœ¨ï¼Œåˆ™ç”Ÿæˆæ–°çš„ map å¯¹è±¡ï¼Œå¹¶æŠŠè¯¥å¯¹è±¡èµ‹å€¼ç»™å¯¹åº”çš„ value</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>depsMap<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            targetMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token punctuation">(</span>depsMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token comment">// è·å–æŒ‡å®š key çš„ dep</span></span>
<span class="line">        <span class="token keyword">let</span> dep <span class="token operator">=</span> depsMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment">// å¦‚æœ dep ä¸å­˜åœ¨ï¼Œåˆ™ç”Ÿæˆä¸€ä¸ªæ–°çš„ depï¼Œå¹¶æ”¾å…¥åˆ° depsMap ä¸­</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>dep<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            depsMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token punctuation">(</span>dep <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token comment">// æŠŠæ‰€æœ‰çš„ activeEffect æ–¹æ³•åŠ å…¥åˆ° dep ä¸­</span></span>
<span class="line">        dep<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>activeEffect<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token doc-comment comment">/**</span>
<span class="line">     * è§¦å‘ä¾èµ–</span>
<span class="line">     */</span></span>
<span class="line">    <span class="token keyword">function</span> <span class="token function">trigger</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// ä¾æ® target è·å–å­˜å‚¨çš„ map å®ä¾‹</span></span>
<span class="line">        <span class="token keyword">const</span> depsMap <span class="token operator">=</span> targetMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment">// å¦‚æœ map ä¸å­˜åœ¨ï¼Œåˆ™ç›´æ¥ return</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>depsMap<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">return</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token comment">// ä¾æ®æŒ‡å®šçš„ keyï¼Œè·å– dep å®ä¾‹</span></span>
<span class="line">        <span class="token keyword">let</span> dep <span class="token operator">=</span> depsMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span></span>
<span class="line">        <span class="token comment">// dep ä¸å­˜åœ¨åˆ™ç›´æ¥ return</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>dep<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">return</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token comment">// è§¦å‘ dep</span></span>
<span class="line">        <span class="token function">triggerEffects</span><span class="token punctuation">(</span>dep<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token doc-comment comment">/**</span>
<span class="line">     * ä¾æ¬¡è§¦å‘ dep ä¸­ä¿å­˜çš„ä¾èµ–</span>
<span class="line">     */</span></span>
<span class="line">    <span class="token keyword">function</span> <span class="token function">triggerEffects</span><span class="token punctuation">(</span><span class="token parameter">dep</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// æŠŠ dep æ„å»ºä¸ºä¸€ä¸ªæ•°ç»„</span></span>
<span class="line">        <span class="token keyword">const</span> effects <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>dep<span class="token punctuation">)</span> <span class="token operator">?</span> dep <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span>dep<span class="token punctuation">]</span></span>
<span class="line">        <span class="token comment">// ä¾æ¬¡è§¦å‘</span></span>
<span class="line">        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> effect <span class="token keyword">of</span> effects<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            effect<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token doc-comment comment">/**</span>
<span class="line">     * proxy çš„ handler</span>
<span class="line">     */</span></span>
<span class="line">    <span class="token keyword">const</span> baseHandlers <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> receiver</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// åˆ©ç”¨ Reflect å¾—åˆ°è¿”å›å€¼</span></span>
<span class="line">            <span class="token keyword">const</span> res <span class="token operator">=</span> Reflect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span></span>
<span class="line">            <span class="token comment">// æ”¶é›†ä¾èµ–</span></span>
<span class="line">            <span class="token function">track</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">)</span></span>
<span class="line">            <span class="token keyword">return</span> res</span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> receiver</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// åˆ©ç”¨ Reflect.set è®¾ç½®æ–°å€¼</span></span>
<span class="line">            <span class="token keyword">const</span> result <span class="token operator">=</span> Reflect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span></span>
<span class="line">            <span class="token comment">// è§¦å‘ä¾èµ–</span></span>
<span class="line">            <span class="token function">trigger</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> key<span class="token punctuation">)</span></span>
<span class="line">            <span class="token keyword">return</span> result</span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">function</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> baseHandlers<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">return</span> proxy</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// --------------- ref æ¨¡å— --------------- </span></span>
<span class="line">    <span class="token keyword">class</span> <span class="token class-name">RefImpl</span> <span class="token punctuation">{</span></span>
<span class="line">        _rawValue</span>
<span class="line">        _value</span>
<span class="line">        dep</span>
<span class="line"></span>
<span class="line">        <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// åŸå§‹æ•°æ®</span></span>
<span class="line">            <span class="token keyword">this</span><span class="token punctuation">.</span>_rawValue <span class="token operator">=</span> value</span>
<span class="line">            <span class="token keyword">this</span><span class="token punctuation">.</span>_value <span class="token operator">=</span> value</span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        <span class="token doc-comment comment">/**</span>
<span class="line">         * get è¯­æ³•å°†å¯¹è±¡å±æ€§ç»‘å®šåˆ°æŸ¥è¯¢è¯¥å±æ€§æ—¶å°†è¢«è°ƒç”¨çš„å‡½æ•°ã€‚</span>
<span class="line">         * å³ï¼šxxx.value æ—¶è§¦å‘è¯¥å‡½æ•°</span>
<span class="line">         */</span></span>
<span class="line">        <span class="token keyword">get</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// æ”¶é›†ä¾èµ–</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>activeEffect<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">const</span> dep <span class="token operator">=</span> ref<span class="token punctuation">.</span>dep <span class="token operator">||</span> <span class="token punctuation">(</span>ref<span class="token punctuation">.</span>dep <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">                dep<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>activeEffect<span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_value</span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">set</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token parameter">newVal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token doc-comment comment">/**</span>
<span class="line">             * newVal ä¸ºæ–°æ•°æ®</span>
<span class="line">             * this._rawValue ä¸ºæ—§æ•°æ®ï¼ˆåŸå§‹æ•°æ®ï¼‰</span>
<span class="line">             * å¯¹æ¯”ä¸¤ä¸ªæ•°æ®æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–</span>
<span class="line">             */</span></span>
<span class="line">            <span class="token comment">// æ›´æ–°åŸå§‹æ•°æ®</span></span>
<span class="line">            <span class="token keyword">this</span><span class="token punctuation">.</span>_rawValue <span class="token operator">=</span> newVal</span>
<span class="line">            <span class="token keyword">this</span><span class="token punctuation">.</span>_value <span class="token operator">=</span> newVal</span>
<span class="line">            <span class="token comment">// è§¦å‘ä¾èµ–</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>ref<span class="token punctuation">.</span>dep<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token function">triggerEffects</span><span class="token punctuation">(</span>ref<span class="token punctuation">.</span>dep<span class="token punctuation">)</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token doc-comment comment">/**</span>
<span class="line">     * ref å‡½æ•°</span>
<span class="line">     * <span class="token keyword">@param</span> <span class="token parameter">value</span> unknown</span>
<span class="line">     */</span></span>
<span class="line">    <span class="token keyword">function</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RefImpl</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// --------------- effect æ¨¡å— --------------- </span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// å½“å‰éœ€è¦æ‰§è¡Œçš„ effect</span></span>
<span class="line">    <span class="token keyword">let</span> activeEffect</span>
<span class="line"></span>
<span class="line">    <span class="token doc-comment comment">/**</span>
<span class="line">     * å“åº”æ€§è§¦å‘ä¾èµ–æ—¶çš„æ‰§è¡Œç±»</span>
<span class="line">     */</span></span>
<span class="line">    <span class="token keyword">class</span> <span class="token class-name">ReactiveEffect</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">this</span><span class="token punctuation">.</span>fn <span class="token operator">=</span> fn</span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// ä¸º activeEffect èµ‹å€¼</span></span>
<span class="line">            activeEffect <span class="token operator">=</span> <span class="token keyword">this</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// æ‰§è¡Œ fn å‡½æ•°</span></span>
<span class="line">            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token doc-comment comment">/**</span>
<span class="line">     * effect å‡½æ•°</span>
<span class="line">     * <span class="token keyword">@param</span> <span class="token parameter">fn</span> æ‰§è¡Œæ–¹æ³•</span>
<span class="line">     * <span class="token keyword">@returns</span> ä»¥ ReactiveEffect å®ä¾‹ä¸º this çš„æ‰§è¡Œå‡½æ•°</span>
<span class="line">     */</span></span>
<span class="line">    <span class="token keyword">function</span> <span class="token function">effect</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// ç”Ÿæˆ ReactiveEffect å®ä¾‹</span></span>
<span class="line">        <span class="token keyword">const</span> _effect <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReactiveEffect</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// æ‰§è¡Œ run å‡½æ•°</span></span>
<span class="line">        _effect<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">    <span class="token comment">//  --------------- æµ‹è¯• ref --------------- </span></span>
<span class="line">    <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&#39;å¼ ä¸‰&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// è°ƒç”¨ effect æ–¹æ³•</span></span>
<span class="line">    <span class="token function">effect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;#app&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText <span class="token operator">=</span> name<span class="token punctuation">.</span>value</span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        name<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&#39;æå››&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æœ€é•¿é€’å¢å­åºåˆ—" tabindex="-1"><a class="header-anchor" href="#æœ€é•¿é€’å¢å­åºåˆ—"><span>æœ€é•¿é€’å¢å­åºåˆ—</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token doc-comment comment">/**</span>
<span class="line"> * è·å–æœ€é•¿é€’å¢å­åºåˆ—ä¸‹æ ‡</span>
<span class="line"> * ç»´åŸºç™¾ç§‘ï¼šhttps://en.wikipedia.org/wiki/Longest_increasing_subsequence</span>
<span class="line"> * ç™¾åº¦ç™¾ç§‘ï¼šhttps://baike.baidu.com/item/%E6%9C%80%E9%95%BF%E9%80%92%E5%A2%9E%E5%AD%90%E5%BA%8F%E5%88%97/22828111</span>
<span class="line"> */</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">getSequence</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// è·å–ä¸€ä¸ªæ•°ç»„æµ…æ‹·è´ã€‚æ³¨æ„ p çš„å…ƒç´ æ”¹å˜å¹¶ä¸ä¼šå½±å“ arr</span></span>
<span class="line">    <span class="token comment">// p æ˜¯ä¸€ä¸ªæœ€ç»ˆçš„å›æº¯æ•°ç»„ï¼Œå®ƒä¼šåœ¨æœ€ç»ˆçš„ result å›æº¯ä¸­è¢«ä½¿ç”¨</span></span>
<span class="line">    <span class="token comment">// å®ƒä¼šåœ¨æ¯æ¬¡ result å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè®°å½• result æ›´æ–°å‰æœ€åä¸€ä¸ªç´¢å¼•çš„å€¼</span></span>
<span class="line">    <span class="token keyword">const</span> p <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment">// å®šä¹‰è¿”å›å€¼ï¼ˆæœ€é•¿é€’å¢å­åºåˆ—ä¸‹æ ‡ï¼‰ï¼Œå› ä¸ºä¸‹æ ‡ä» 0 å¼€å§‹ï¼Œæ‰€ä»¥å®ƒçš„åˆå§‹å€¼ä¸º 0</span></span>
<span class="line">    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span></span>
<span class="line">    <span class="token keyword">let</span> i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> u<span class="token punctuation">,</span> v<span class="token punctuation">,</span> c</span>
<span class="line">    <span class="token comment">// å½“å‰æ•°ç»„çš„é•¿åº¦</span></span>
<span class="line">    <span class="token keyword">const</span> len <span class="token operator">=</span> arr<span class="token punctuation">.</span>length</span>
<span class="line">    <span class="token comment">// å¯¹æ•°ç»„ä¸­æ‰€æœ‰çš„å…ƒç´ è¿›è¡Œ for å¾ªç¯å¤„ç†ï¼Œi = ä¸‹æ ‡</span></span>
<span class="line">    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// æ ¹æ®ä¸‹æ ‡è·å–å½“å‰å¯¹åº”å…ƒç´ </span></span>
<span class="line">        <span class="token keyword">const</span> arrI <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span></span>
<span class="line">        <span class="token comment">// </span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>arrI <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// è·å– result ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå³ï¼šå½“å‰ result ä¸­ä¿å­˜çš„æœ€å¤§å€¼çš„ä¸‹æ ‡</span></span>
<span class="line">            j <span class="token operator">=</span> result<span class="token punctuation">[</span>result<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span></span>
<span class="line">            <span class="token comment">// arr[j] = å½“å‰ result ä¸­æ‰€ä¿å­˜çš„æœ€å¤§å€¼</span></span>
<span class="line">            <span class="token comment">// arrI = å½“å‰å€¼</span></span>
<span class="line">            <span class="token comment">// å¦‚æœ arr[j] &lt; arrI ã€‚é‚£ä¹ˆå°±è¯æ˜ï¼Œå½“å‰å­˜åœ¨æ›´å¤§çš„åºåˆ—ï¼Œé‚£ä¹ˆè¯¥ä¸‹æ ‡å°±éœ€è¦è¢«æ”¾å…¥åˆ° result çš„æœ€åä½ç½®</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> arrI<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                p<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> j</span>
<span class="line">                <span class="token comment">// æŠŠå½“å‰çš„ä¸‹æ ‡ i æ”¾å…¥åˆ° result çš„æœ€åä½ç½®</span></span>
<span class="line">                result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span></span>
<span class="line">                <span class="token keyword">continue</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token comment">// ä¸æ»¡è¶³ arr[j] &lt; arrI çš„æ¡ä»¶ï¼Œå°±è¯æ˜ç›®å‰ result ä¸­çš„æœ€åä½ç½®ä¿å­˜ç€æ›´å¤§çš„æ•°å€¼çš„ä¸‹æ ‡ã€‚</span></span>
<span class="line">            <span class="token comment">// ä½†æ˜¯è¿™ä¸ªä¸‹æ ‡å¹¶ä¸ä¸€å®šæ˜¯ä¸€ä¸ªé€’å¢çš„åºåˆ—ï¼Œæ¯”å¦‚ï¼š [1, 3] å’Œ [1, 2] </span></span>
<span class="line">            <span class="token comment">// æ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦ç¡®å®šå½“å‰çš„åºåˆ—æ˜¯é€’å¢çš„ã€‚</span></span>
<span class="line">            <span class="token comment">// è®¡ç®—æ–¹å¼å°±æ˜¯é€šè¿‡ï¼šäºŒåˆ†æŸ¥æ‰¾æ¥è¿›è¡Œçš„</span></span>
<span class="line"></span>
<span class="line">            <span class="token comment">// åˆå§‹ä¸‹æ ‡</span></span>
<span class="line">            u <span class="token operator">=</span> <span class="token number">0</span></span>
<span class="line">            <span class="token comment">// æœ€ç»ˆä¸‹æ ‡</span></span>
<span class="line">            v <span class="token operator">=</span> result<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span></span>
<span class="line">            <span class="token comment">// åªæœ‰åˆå§‹ä¸‹æ ‡ &lt; æœ€ç»ˆä¸‹æ ‡æ—¶æ‰éœ€è¦è®¡ç®—</span></span>
<span class="line">            <span class="token keyword">while</span> <span class="token punctuation">(</span>u <span class="token operator">&lt;</span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token comment">// (u + v) è½¬åŒ–ä¸º 32 ä½ 2 è¿›åˆ¶ï¼Œå³ç§» 1 ä½ === å–ä¸­é—´ä½ç½®ï¼ˆå‘ä¸‹å–æ•´ï¼‰ä¾‹å¦‚ï¼š8 &gt;&gt; 1 = 4;  9 &gt;&gt; 1 = 4; 5 &gt;&gt; 1 = 2</span></span>
<span class="line">                <span class="token comment">// https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Right_shift</span></span>
<span class="line">                <span class="token comment">// c è¡¨ç¤ºä¸­é—´ä½ã€‚å³ï¼šåˆå§‹ä¸‹æ ‡ + æœ€ç»ˆä¸‹æ ‡ / 2 ï¼ˆå‘ä¸‹å–æ•´ï¼‰</span></span>
<span class="line">                c <span class="token operator">=</span> <span class="token punctuation">(</span>u <span class="token operator">+</span> v<span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span> <span class="token number">1</span></span>
<span class="line">                <span class="token comment">// ä» result ä¸­æ ¹æ® cï¼ˆä¸­é—´ä½ï¼‰ï¼Œå–å‡ºä¸­é—´ä½çš„ä¸‹æ ‡ã€‚</span></span>
<span class="line">                <span class="token comment">// ç„¶ååˆ©ç”¨ä¸­é—´ä½çš„ä¸‹æ ‡ï¼Œä» arr ä¸­å–å‡ºå¯¹åº”çš„å€¼ã€‚</span></span>
<span class="line">                <span class="token comment">// å³ï¼šarr[result[c]] = result ä¸­é—´ä½çš„å€¼</span></span>
<span class="line">                <span class="token comment">// å¦‚æœï¼šresult ä¸­é—´ä½çš„å€¼ &lt; arrIï¼Œåˆ™ uï¼ˆåˆå§‹ä¸‹æ ‡ï¼‰= ä¸­é—´ä½ + 1ã€‚å³ï¼šä»ä¸­é—´å‘å³ç§»åŠ¨ä¸€ä½ï¼Œä½œä¸ºåˆå§‹ä¸‹æ ‡ã€‚ ï¼ˆä¸‹æ¬¡ç›´æ¥ä»ä¸­é—´å¼€å§‹ï¼Œå¾€åè®¡ç®—å³å¯ï¼‰</span></span>
<span class="line">                <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>result<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> arrI<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                    u <span class="token operator">=</span> c <span class="token operator">+</span> <span class="token number">1</span></span>
<span class="line">                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token comment">// å¦åˆ™ï¼Œåˆ™ vï¼ˆæœ€ç»ˆä¸‹æ ‡ï¼‰ = ä¸­é—´ä½ã€‚å³ï¼šä¸‹æ¬¡ç›´æ¥ä» 0 å¼€å§‹ï¼Œè®¡ç®—åˆ°ä¸­é—´ä½ç½® å³å¯ã€‚</span></span>
<span class="line">                    v <span class="token operator">=</span> c</span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">            <span class="token comment">// æœ€ç»ˆï¼Œç»è¿‡ while çš„äºŒåˆ†è¿ç®—å¯ä»¥è®¡ç®—å‡ºï¼šç›®æ ‡ä¸‹æ ‡ä½ u</span></span>
<span class="line">            <span class="token comment">// åˆ©ç”¨ u ä» result ä¸­è·å–ä¸‹æ ‡ï¼Œç„¶åæ‹¿åˆ° arr ä¸­å¯¹åº”çš„å€¼ï¼šarr[result[u]]</span></span>
<span class="line">            <span class="token comment">// å¦‚æœï¼šarr[result[u]] &gt; arrI çš„ï¼Œåˆ™è¯æ˜å½“å‰  result ä¸­å­˜åœ¨çš„ä¸‹æ ‡ ã€Šä¸æ˜¯ã€‹ é€’å¢åºåˆ—ï¼Œåˆ™éœ€è¦è¿›è¡Œæ›¿æ¢</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>arrI <span class="token operator">&lt;</span> arr<span class="token punctuation">[</span>result<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">if</span> <span class="token punctuation">(</span>u <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                    p<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> result<span class="token punctuation">[</span>u <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">                <span class="token comment">// è¿›è¡Œæ›¿æ¢ï¼Œæ›¿æ¢ä¸ºé€’å¢åºåˆ—</span></span>
<span class="line">                result<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> i</span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token comment">// é‡æ–°å®šä¹‰ uã€‚æ­¤æ—¶ï¼šu = result çš„é•¿åº¦</span></span>
<span class="line">    u <span class="token operator">=</span> result<span class="token punctuation">.</span>length</span>
<span class="line">    <span class="token comment">// é‡æ–°å®šä¹‰ vã€‚æ­¤æ—¶ v = result çš„æœ€åä¸€ä¸ªå…ƒç´ </span></span>
<span class="line">    v <span class="token operator">=</span> result<span class="token punctuation">[</span>u <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span></span>
<span class="line">    <span class="token comment">// è‡ªåå‘å‰å¤„ç† resultï¼Œåˆ©ç”¨ p ä¸­æ‰€ä¿å­˜çš„ç´¢å¼•å€¼ï¼Œè¿›è¡Œæœ€åçš„ä¸€æ¬¡å›æº¯</span></span>
<span class="line">    <span class="token keyword">while</span> <span class="token punctuation">(</span>u<span class="token operator">--</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        result<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> v</span>
<span class="line">        v <span class="token operator">=</span> p<span class="token punctuation">[</span>v<span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">return</span> result</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 1487647822@qq.com">LiHegui</span><!----><!--]--><!--]--></span></div></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/upKnowledge/assets/app-BeRZjn83.js" defer></script>
  </body>
</html>
